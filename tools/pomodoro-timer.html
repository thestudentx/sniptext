<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GE98V48RK8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config', 'G-GE98V48RK8');
  </script>

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)}
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y)
    })(window, document, "clarity", "script", "t5y2d08vd0");
  </script>
  <meta name="msvalidate.01" content="A9EB890789B5C28E62629F99EEDC30A1" />

  <!-- Essentials -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <base href="/tools/">

  <!-- Primary SEO -->
  <title>Pomodoro Timer - Focus Cycles, Tasks, Streaks, Analytics | SnipText</title>
  <meta name="description" content="Free Pomodoro Timer by SnipText for academic focus. Smart cycles, auto long breaks, task list with estimates, calming ambient sounds, streaks, and privacy-friendly analytics. Everything runs in your browser." />
  <meta name="keywords" content="pomodoro timer, academic focus timer, study timer, productivity timer, 25 5 timer, long break, tasks, streaks, analytics, ambient sounds, fullscreen focus, sniptext tools" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://checkai.pro/tools/pomodoro-timer" />
  <link rel="alternate" href="https://checkai.pro/tools/pomodoro-timer" hreflang="en" />
  <link rel="alternate" href="https://checkai.pro/tools/pomodoro-timer" hreflang="x-default" />

  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css?v=reset1" />
  <link rel="stylesheet" href="/tools/css/free-tools.css?v=reset1" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="SnipText" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="Pomodoro Timer - Focus Cycles, Tasks, Streaks, Analytics" />
  <meta property="og:description" content="Smart cycles with tasks, auto breaks, ambient sounds, and clean analytics. Private and fast." />
  <meta property="og:url" content="https://checkai.pro/tools/pomodoro-timer" />
  <meta property="og:image" content="https://checkai.pro/images/sniptext-default-tools-img" />
  <meta property="og:image:secure_url" content="https://checkai.pro/images/sniptext-default-tools-img" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="SnipText tool preview" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Pomodoro Timer - Focus Cycles, Tasks, Streaks, Analytics" />
  <meta name="twitter:description" content="Calm, professional Pomodoro with tasks, auto breaks, ambient sounds, insights, and streaks." />
  <meta name="twitter:image" content="https://checkai.pro/images/sniptext-default-tools-img" />

  <!-- Theme / Icons -->
  <meta name="theme-color" content="#0F172A" />
  <link rel="icon" href="/favicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- JSON-LD: WebApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"SnipText Pomodoro Timer",
    "url":"https://checkai.pro/tools/pomodoro-timer",
    "applicationCategory":"UtilitiesApplication",
    "operatingSystem":"All",
    "isAccessibleForFree":true,
    "featureList":[
      "Smart Pomodoro cycles with auto long breaks",
      "Task list with estimates and quick planning",
      "Ambient sound mixer for calm focus",
      "Notifications and gentle chimes",
      "Streaks, insights, and exportable history",
      "Keyboard shortcuts and fullscreen focus",
      "Offline, private, client-side"
    ],
    "publisher":{
      "@type":"Organization",
      "name":"Snip Text",
      "logo":{"@type":"ImageObject","url":"https://checkai.pro/favicon.png","width":512,"height":512}
    }
  }
  </script>

  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Is the Pomodoro Timer private?","acceptedAnswer":{"@type":"Answer","text":"Yes. Everything runs locally in your browser. No data is uploaded."}},
      {"@type":"Question","name":"Can I create custom Pomodoro lengths?","acceptedAnswer":{"@type":"Answer","text":"Yes. Set custom focus, short break, and long break durations, plus auto-cycle rules."}},
      {"@type":"Question","name":"Does it support sounds and notifications?","acceptedAnswer":{"@type":"Answer","text":"Yes. Enable gentle chimes and browser notifications. There is also a calm ambient sound mixer."}},
      {"@type":"Question","name":"How are my stats saved?","acceptedAnswer":{"@type":"Answer","text":"Your data is stored in your browser storage to keep it fast and private."}}
    ]
  }
  </script>

  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://checkai.pro/"},
      {"@type":"ListItem","position":2,"name":"Tools","item":"https://checkai.pro/tools/free-tools.html"},
      {"@type":"ListItem","position":3,"name":"Pomodoro Timer","item":"https://checkai.pro/tools/pomodoro-timer"}
    ]
  }
  </script>

  <style>
/* ==========================================================
   SnipText • POMODORO TIMER
   Dark theme, brand-aware, reference layout aligned
   All tool-scoped tokens use --pomo-* and hex codes
========================================================== */
:root{
  /* Brand palette as hex codes */
  --pomo-primary:#1D4ED8;      /* primary blue */
  --pomo-accent:#3B82F6;       /* accent blue */
  --pomo-bg-dark:#0F172A;      /* site dark */
  --pomo-white:#ffffff;
  --pomo-text:#e6ebf5;
  --pomo-muted:#94a3b8;
  --pomo-border:rgba(255,255,255,.10);
  --pomo-warm:#e85d27;         /* often used orange */
  --pomo-cta-end:#ff7c4c;

  /* Page background with subtle warm mix */
  --pomo-bg:
    radial-gradient(900px 600px at 120% -10%, rgba(232, 93, 39, 0.12), transparent 60%),
    radial-gradient(1100px 750px at -10% 20%, rgba(59,130,246,0.18), transparent 65%),
    linear-gradient(180deg, #0F172A 0%, #0b1222 60%, #0F172A 100%);

  /* Surfaces and shadows */
  --pomo-surface-1:#0b1428;
  --pomo-surface-2:#101a35;
  --pomo-chip:#0f1a34;
  --pomo-glow:rgba(59,130,246,.25);
  --pomo-shadow:0 16px 40px rgba(2,6,23,.5);
  --pomo-shadow-md:0 12px 30px rgba(0,0,0,.35);

  /* Accents and states */
  --pomo-focus:#60a5fa;
  --pomo-good:#22c55e;
  --pomo-warn:#f59e0b;
  --pomo-bad:#ef4444;

  /* Radii and easing */
  --pomo-radius-lg:20px;
  --pomo-radius:14px;
  --pomo-ease:cubic-bezier(.22,.61,.36,1);
  --pomo-dur:240ms;

  /* CTA gradient */
  --pomo-cta: linear-gradient(135deg, var(--pomo-accent), var(--pomo-cta-end));
}

/* Reset and base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--pomo-text);
  font-family:'Roboto','Arial',sans-serif;
  background:var(--pomo-bg);
  background-attachment:fixed,fixed,fixed;
  min-height:100dvh;
  line-height:1.6;
}

/* Wrapper matches reference layout proportions */
.pomo-wrap{
  max-width:1120px;
  margin:0 auto;
  padding:28px clamp(16px,2vw,28px) 90px;
}

/* Hero */
.pomo-hero{
  display:grid; grid-template-columns:72px 1fr; gap:16px; align-items:center;
  margin:8px 0 22px; padding:16px;
  border:1px solid var(--pomo-border); border-radius:var(--pomo-radius-lg);
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  backdrop-filter:blur(10px);
  box-shadow:var(--pomo-shadow);
  animation:pomo-fade-up 480ms var(--pomo-ease) both;
}
.pomo-hero-icon{
  width:64px;height:64px;display:grid;place-items:center;border-radius:16px;
  background:linear-gradient(135deg,var(--pomo-primary),var(--pomo-accent));
  box-shadow:0 18px 40px var(--pomo-glow);
}
.pomo-hero-icon svg{width:30px;height:30px}
.pomo-title{
  margin:0;
  font-family:'Poppins','Segoe UI',sans-serif;
  font-weight:800; letter-spacing:.2px;
  font-size:clamp(22px,2.3vw,34px); line-height:1.15;
  background:linear-gradient(90deg,#fff,
    color-mix(in oklab, var(--pomo-accent) 60%, #fff) 45%,
    color-mix(in oklab, var(--pomo-cta-end) 48%, #fff) 85%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.pomo-sub{margin:6px 0 0;color:var(--pomo-muted);max-width:82ch}

/* Grid */
.pomo-grid{display:grid;grid-template-columns:1.25fr .75fr;gap:18px}
@media (max-width:980px){.pomo-grid{grid-template-columns:1fr}}

/* Cards */
.pomo-card{
  background:linear-gradient(180deg,var(--pomo-surface-2),var(--pomo-surface-1));
  border:1px solid var(--pomo-border);
  border-radius:var(--pomo-radius-lg);
  padding:16px; box-shadow:var(--pomo-shadow-md);
  animation:pomo-fade-in 360ms var(--pomo-ease) both;
}
.pomo-row{display:grid;gap:12px;margin-bottom:14px}
.pomo-row.cols-2{grid-template-columns:1fr 1fr}
.pomo-row.cols-3{grid-template-columns:1fr 1fr 1fr}
@media (max-width:720px){.pomo-row.cols-2,.pomo-row.cols-3{grid-template-columns:1fr}}

/* Labels and inputs */
label.pomo-label{
  display:block;font-weight:700;font-family:'Poppins','Segoe UI',sans-serif;
  font-size:.95rem;margin-bottom:6px; letter-spacing:.2px; color:#e9eefc;
}
.pomo-input,.pomo-select,.pomo-btn,.pomo-toggle{
  outline:none;border-radius:12px;border:1px solid var(--pomo-border);
  transition:border-color var(--pomo-dur) var(--pomo-ease),
           box-shadow var(--pomo-dur) var(--pomo-ease),
           transform 120ms ease, background var(--pomo-dur), opacity 120ms ease;
}
.pomo-input,.pomo-select{
  width:100%;padding:10px 12px;background:#0b1224;color:var(--pomo-text)
}
.pomo-input:focus,.pomo-select:focus{
  border-color:var(--pomo-focus);
  box-shadow:0 0 0 4px rgba(96,165,250,.16);
  transform:translateY(-1px)
}
.pomo-input::placeholder{color:#7c87a3}
.pomo-help{color:var(--pomo-muted);font-size:.88rem}

/* Toggles as pills */
.pomo-toggle.pomo-btn{
  justify-content:center;
  background:#0b1224; color:var(--pomo-text);
}
.pomo-toggle input:checked + span,
.pomo-toggle[aria-pressed="true"]{
  color:#fff;
  background:linear-gradient(180deg, rgba(59,130,246,.18), rgba(255,124,76,.18));
  border-color:rgba(59,130,246,.45);
  box-shadow:0 0 0 3px rgba(59,130,246,.15) inset;
}

/* Buttons */
.pomo-btn{
  display:inline-flex;align-items:center;gap:10px;
  padding:10px 14px;background:#0b1224;color:var(--pomo-text);
  cursor:pointer;user-select:none;font-weight:600
}
.pomo-btn.primary{
  background:var(--pomo-cta);
  border-color:transparent; color:#0b0f2c;
  box-shadow:0 14px 32px rgba(59,130,246,.30)
}
.pomo-btn:hover{transform:translateY(-2px)}
.pomo-btn:active{transform:translateY(0);opacity:.96}
.pomo-btn[disabled]{opacity:.55;cursor:not-allowed}
.pomo-btn.inline{padding:8px 12px;border-radius:10px}

/* Stage and time display */
.pomo-stage{
  border:1px dashed var(--pomo-border);
  background:#0b1224;border-radius:16px;padding:20px;min-height:200px;position:relative;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  display:grid;place-items:center; text-align:center;
}
.pomo-clock{
  font-family:ui-monospace, Menlo, Consolas, monospace;
  font-size:clamp(44px,7vw,68px);
  line-height:1; letter-spacing:1px;
}
.pomo-phase{margin-top:8px;color:var(--pomo-muted);font-weight:600}

/* Progress ring */
.pomo-ring{
  width:160px;height:160px;position:relative;margin:6px auto 12px;
}
.pomo-ring svg{transform:rotate(-90deg)}
.pomo-ring circle{fill:none;stroke-width:10}
.pomo-ring .pomo-ring-bg{stroke:rgba(255,255,255,.1)}
.pomo-ring .pomo-ring-fg{stroke:url(#pomoGrad);stroke-linecap:round;transition:stroke-dashoffset 400ms var(--pomo-ease)}

/* Stats and graph */
.pomo-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.pomo-stat{
  display:grid;gap:6px;padding:12px;border:1px solid var(--pomo-border);
  border-radius:12px;background:#0b1224
}
.pomo-stat .pomo-big{font-family:ui-monospace, Menlo, monospace;font-size:1.35rem}
.pomo-graph{
  height:120px;border:1px solid var(--pomo-border);border-radius:12px;background:
    linear-gradient(180deg, rgba(255,255,255,.028), transparent 60%);
}

/* Right column: tasks, sounds, options */
.pomo-chip{
  display:inline-flex;align-items:center;gap:6px;
  padding:6px 10px;border-radius:999px;background:var(--pomo-chip);
  border:1px solid var(--pomo-border);font-size:.82rem;color:var(--pomo-text)
}
.pomo-task-list{display:grid;gap:10px;margin-top:8px}
.pomo-task{
  display:grid;grid-template-columns:24px 1fr auto;align-items:center;gap:10px;
  padding:10px;border:1px solid var(--pomo-border);border-radius:12px;background:#0b1224
}
.pomo-task input[type="checkbox"]{accent-color:var(--pomo-accent);width:18px;height:18px}
.pomo-task-title{font-weight:600}
.pomo-task-meta{font-size:.85rem;color:var(--pomo-muted)}
.pomo-task-actions{display:flex;gap:6px}
.pomo-task-actions .pomo-btn.inline{background:#0d1831}

/* Ambient sound mixer */
.pomo-sound-item{display:flex;align-items:center;justify-content:space-between;gap:10px}
.pomo-sound-item input[type="range"]{width:140px}

/* Selection and scrollbars */
::selection{ background: color-mix(in oklab, var(--pomo-accent) 28%, transparent) }

@supports (scrollbar-width: thin){
  .pomo-wrap *{ scrollbar-width: thin; scrollbar-color: rgba(255,255,255,.25) transparent; }
}
.pomo-wrap *::-webkit-scrollbar{ height:10px; width:10px }
.pomo-wrap *::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.25); border-radius:999px }

/* Anims and focus */
@keyframes pomo-fade-up{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
@keyframes pomo-fade-in{from{opacity:0}to{opacity:1}}
:where(.pomo-btn,.pomo-input,.pomo-select,.pomo-toggle){outline:none}
:where(.pomo-btn,.pomo-input,.pomo-select,.pomo-toggle):focus-visible{
  outline:2px solid color-mix(in oklab, var(--pomo-accent) 60%, white); outline-offset:2px;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .pomo-btn,.pomo-card,.pomo-hero{transition:none !important;animation:none !important}
}

.feature-card-all-pages {margin: 0 2rem;}
.tools-grid {margin: 1rem; background: #0e1730;}
.tool-card {background: #0f1b34;}
@media (max-width: 600px) { .tools-grid {margin: 1rem 0;} }
  </style>
</head>
<body>



    

<nav id="main-navbar">
  <div class="nav-container">
    <div class="logo">
      <a href="/index.html">Snip Text</a>
    </div>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul class="nav-links" id="nav-links">
      <li><a href="/index.html">Home</a></li>
      <li><a href="/tools/free-tools.html">Free Tools</a></li>
      <li><a href="features.html">Features</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="/blog/blog.html">Blog</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a id="nav-dashboard-link" href="login.html">Dashboard</a></li>
      <li><a id="nav-logout-link" href="#" style="display:none;">Logout</a></li>
    </ul>
  </div>
</nav>
  


  



<main class="pomo-wrap" itemscope itemtype="https://schema.org/SoftwareApplication">
  <!-- Hero -->
  <div class="pomo-hero">
    <div class="pomo-hero-icon" aria-hidden="true">
      <!-- Tomato timer icon -->
      <svg viewBox="0 0 24 24" fill="none" aria-label="Pomodoro Timer Icon" role="img" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 6c1.5-2 4-3 6-3" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
        <path d="M12 6c-1.5-2-4-3-6-3" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
        <circle cx="12" cy="14" r="8" stroke="white" stroke-width="1.6"/>
        <path d="M12 10v4l3 2" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
      </svg>
    </div>
    <div>
      <h1 class="pomo-title" itemprop="name">Pomodoro Timer - simple academic productivity timer</h1>
      <p class="pomo-sub" itemprop="description">Stay focused with calm cycles, auto long breaks, quick task planning, ambient sounds, and clean analytics. Private and runs entirely in your browser.</p>
    </div>
  </div>

  <section class="pomo-grid" aria-label="Pomodoro Timer workspace">
    <!-- Left: Timer -->
    <div class="pomo-card">
      <!-- Controls -->
      <div class="pomo-row cols-3">
        <div>
          <label class="pomo-label" for="pomo-focus">Focus minutes</label>
          <input id="pomo-focus" class="pomo-input" type="number" min="1" max="180" value="25" />
        </div>
        <div>
          <label class="pomo-label" for="pomo-short">Short break</label>
          <input id="pomo-short" class="pomo-input" type="number" min="1" max="60" value="5" />
        </div>
        <div>
          <label class="pomo-label" for="pomo-long">Long break</label>
          <input id="pomo-long" class="pomo-input" type="number" min="1" max="90" value="15" />
        </div>
      </div>

      <div class="pomo-row cols-3">
        <label class="pomo-toggle pomo-btn" title="Auto start next focus/break">
          <input id="pomo-auto" type="checkbox" hidden />
          <span>Auto cycle</span>
        </label>
        <label class="pomo-toggle pomo-btn" title="Long break after N focus sessions">
          <input id="pomo-longafter" type="checkbox" hidden />
          <span>Long after 4</span>
        </label>
        <label class="pomo-toggle pomo-btn" title="Gentle sound at phase end">
          <input id="pomo-chime" type="checkbox" hidden />
          <span>Chime</span>
        </label>
      </div>

      <!-- Stage -->
      <div class="pomo-row">
        <div class="pomo-stage">
          <div class="pomo-ring" aria-hidden="true">
            <svg width="160" height="160" viewBox="0 0 120 120">
              <defs>
                <linearGradient id="pomoGrad" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#3B82F6"/>
                  <stop offset="100%" stop-color="#ff7c4c"/>
                </linearGradient>
              </defs>
              <circle class="pomo-ring-bg" cx="60" cy="60" r="52"></circle>
              <circle id="pomo-ring-fg" class="pomo-ring-fg" cx="60" cy="60" r="52"
                      stroke-dasharray="327" stroke-dashoffset="0"></circle>
            </svg>
          </div>
          <div id="pomo-clock" class="pomo-clock">25:00</div>
          <div id="pomo-phase" class="pomo-phase">Focus</div>
        </div>
        <div class="pomo-help">Press Space to start or pause. L for long break. R to reset. F for fullscreen focus.</div>
      </div>

      <!-- Actions -->
      <div class="pomo-row cols-3">
        <button id="pomo-start" class="pomo-btn primary" aria-label="Start timer">Start</button>
        <button id="pomo-pause" class="pomo-btn" aria-label="Pause timer">Pause</button>
        <button id="pomo-reset" class="pomo-btn" aria-label="Reset timer">Reset</button>
      </div>

      <!-- Presets -->
      <div class="pomo-row cols-3">
        <button class="pomo-btn inline" id="pomo-preset-25">25 - 5</button>
        <button class="pomo-btn inline" id="pomo-preset-50">50 - 10</button>
        <button class="pomo-btn inline" id="pomo-preset-custom">Custom cycle</button>
      </div>

      <!-- Stats -->
      <div class="pomo-row">
        <div class="pomo-stats">
          <div class="pomo-stat">
            <div>Today focus</div>
            <div class="pomo-big" id="pomo-today">0m</div>
            <div class="pomo-help">Time focused today</div>
          </div>
          <div class="pomo-stat">
            <div>Sessions</div>
            <div class="pomo-big" id="pomo-sessions">0</div>
            <div class="pomo-help">Completed focus blocks</div>
          </div>
          <div class="pomo-stat">
            <div>Streak</div>
            <div class="pomo-big" id="pomo-streak">0</div>
            <div class="pomo-help">Consecutive days</div>
          </div>
        </div>
      </div>

      <div class="pomo-row">
        <canvas id="pomo-graph" class="pomo-graph" aria-label="Focus minutes timeline"></canvas>
      </div>

      <div class="pomo-row cols-3">
        <button id="pomo-copy" class="pomo-btn">Copy summary</button>
        <button id="pomo-export" class="pomo-btn">Export .json</button>
        <button id="pomo-import" class="pomo-btn">Import .json</button>
      </div>

      <p class="pomo-help">Private by design - data is stored in your browser. You can export and import whenever you like.</p>
    </div>

    <!-- Right: Tasks, sounds, options -->
    <div class="pomo-card">
      <!-- Quick task planning -->
      <div class="pomo-row">
        <label class="pomo-label">Tasks for this session</label>
        <div class="pomo-row cols-2">
          <input id="pomo-task-title" class="pomo-input" placeholder="Task title" />
          <input id="pomo-task-est" class="pomo-input" type="number" min="1" max="16" value="1" placeholder="Est. pomos" />
        </div>
        <div>
          <button id="pomo-task-add" class="pomo-btn">Add task</button>
        </div>
        <div id="pomo-tasks" class="pomo-task-list" aria-live="polite"></div>
      </div>

      <!-- Ambient sounds -->
      <div class="pomo-row">
        <label class="pomo-label">Ambient sound mixer</label>
        <div class="pomo-sound-item">
          <span>Rain</span>
          <input id="pomo-sound-rain" type="range" min="0" max="1" step="0.01" value="0" />
        </div>
        <div class="pomo-sound-item">
          <span>Waves</span>
          <input id="pomo-sound-waves" type="range" min="0" max="1" step="0.01" value="0" />
        </div>
        <div class="pomo-sound-item">
          <span>Cafe</span>
          <input id="pomo-sound-cafe" type="range" min="0" max="1" step="0.01" value="0" />
        </div>
      </div>

      <!-- Notifications and extras -->
      <div class="pomo-row cols-2">
        <button id="pomo-notify" class="pomo-btn">Enable notifications</button>
        <button id="pomo-focusmode" class="pomo-btn">Fullscreen focus</button>
      </div>

      <div class="pomo-row">
        <label class="pomo-label">Quick links</label>
        <div class="pomo-row cols-2">
          <a class="pomo-btn" href="/tools/word-counter.html">Word & Character Counter</a>
          <a class="pomo-btn" href="/tools/random-text-generator.html">Random Text Generator</a>
        </div>
        <div class="pomo-row cols-2">
          <a class="pomo-btn" href="/tools/whitespace-and-formatting-cleaner.html">Formatting Cleaner</a>
          <a class="pomo-btn" href="/blog/daily-writing-challenge-random-prompt-every-24-hours-streaks-focus-timer-guide-sniptext-blog.html">Daily Writing Guide</a>
        </div>
      </div>

      <div class="pomo-row">
        <span class="pomo-chip">Keyboard: Space, R, L, F</span>
        <span class="pomo-chip">Autosave enabled</span>
      </div>
    </div>
  </section>

  <meta itemprop="operatingSystem" content="All" />
  <meta itemprop="applicationCategory" content="UtilitiesApplication" />

      <div class="free-tools-guide">
    <p class="free-tools-guide-p">See Pomodoro Timer Guide on SnipText Blog Page <a href="/blog/pomodoro-timer-focus-cycles-study-planner-ambient-sounds-streaks-tasks-guide-sniptext-blog.html" class="free-tools-blog-link">here</a>.</p>
  </div>
</main>

    <!-- TOOLS GRID -->
       <div class="feature-card-all-pages">
        <h1 class="feature-card-all-pages-para">Featured Tools</h1>
       </div>
  <section id="tools-grid" class="tools-grid" aria-label="Tools list">
    <!-- Tool cards - 10 items -->

    <article class="tool-card typing-card-teaser" tabindex="0"
                    data-href="/tools/typing-speed-test.html"
                    aria-labelledby="t-typing" data-filter="Engagement & Productivity">
                    <div class="card-icon typing-card-icon" aria-hidden="true">
                      <!-- Typing Speed Test icon: keyboard + stopwatch + spark -->
                      <svg viewBox="0 0 24 24" class="svg-icon typing-svg" role="img" aria-label="Typing Speed Test icon" xmlns="http://www.w3.org/2000/svg">
                        <!-- keyboard frame -->
                        <rect x="3" y="7" width="12" height="9" rx="2" fill="none" stroke="currentColor" stroke-width="1.6"/>
                        <!-- keys -->
                        <path d="M5.5 9h2M8.8 9h2M12 9h2M5.5 11.5h2M8.8 11.5h2M12 11.5h2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                        <!-- stopwatch (speed) -->
                        <circle cx="18.5" cy="9.5" r="3.2" fill="none" stroke="currentColor" stroke-width="1.4"/>
                        <path d="M18.5 6.3V5M17.4 5h2.2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                        <path d="M18.5 9.5l1.4-1.2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                        <!-- spark of progress -->
                        <path d="M19.2 3.6l.5-1 .5 1 1 .5-1 .5-.5 1-.5-1-1-.5 1-.5z" stroke="currentColor" stroke-width="1" fill="none"/>
                      </svg>
                    </div>
                    <h3 id="t-typing" class="card-title typing-card-title">Typing Speed Test - WPM, accuracy</h3>
                    <p class="card-desc typing-card-desc">
                      Measure WPM, corrected WPM, CPM, and accuracy with a rolling WPM graph and per-key error heatmap. Pick words, quotes, or code, toggle punctuation and numbers, set custom durations, track personal bests, and export results. Private and fast in your browser.
                    </p>
                    <a class="card-cta typing-card-cta"
                      href="/tools/typing-speed-test.html"
                      aria-label="Open Typing Speed Test">Open →</a>
                </article>

    <article class="tool-card tim-zon-con-card toolcard" tabindex="0"
  data-href="/tools/time-zone-converter-compare-cities.html"
  aria-labelledby="tim-zon-con-tg" data-filter="Engagement & Productivity">
  <div class="card-icon tim-zon-con-icon" aria-hidden="true">
    <!-- Time Zone Converter icon: globe + clock hands + overlap ring -->
    <svg viewBox="0 0 24 24" class="svg-icon tim-zon-con-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Time Zone Converter - Compare Cities">
      <!-- Globe outline -->
      <circle cx="10" cy="12" r="6.8" fill="none" stroke="currentColor" stroke-width="1.2" opacity="0.35"/>
      <!-- Lat/Lon lines -->
      <path d="M3.6 12h12.8M10 5.2v13.6M6.2 7.7a6.8 6.8 0 0 0 7.6 0M6.2 16.3a6.8 6.8 0 0 1 7.6 0" fill="none" stroke="currentColor" stroke-width="0.9" opacity="0.45"/>
      <!-- City pins -->
      <circle cx="10" cy="5.2" r="0.7" fill="currentColor" opacity="0.9"/>
      <circle cx="16.4" cy="12" r="0.7" fill="currentColor" opacity="0.9"/>
      <circle cx="3.6" cy="12" r="0.7" fill="currentColor" opacity="0.9"/>
      <!-- Clock bezel -->
      <circle cx="18.2" cy="7.6" r="4.2" fill="none" stroke="currentColor" stroke-width="1.2" opacity="0.75"/>
      <!-- Clock hands -->
      <path d="M18.2 7.6v-2.1" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" opacity="0.95"/>
      <path d="M18.2 7.6h2.4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" opacity="0.9"/>
      <circle cx="18.2" cy="7.6" r="0.6" fill="currentColor" />
      <!-- Overlap ring (meeting window) -->
      <path d="M7.6 14.5a3.8 3.8 0 0 0 4.8 0" fill="none" stroke="currentColor" stroke-width="2" opacity="0.28" />
    </svg>
  </div>
  <h3 id="tim-zon-con-tg" class="card-title tim-zon-con-title">Time Zone Converter - Compare Cities, Copy Meeting Slots</h3>
  <p class="card-desc tim-zon-con-desc">
    Add cities or IANA zones, set working hours, and see an overlap heatmap. Copy the best meeting friendly windows, export an ICS invite, or share a tiny link. DST aware, private, and fast in your browser.
  </p>
  <a class="card-cta tim-zon-con-cta"
     href="/tools/time-zone-converter-compare-cities.html"
     aria-label="Open Time Zone Converter - Compare Cities, Copy Meeting Slots">Open →</a>
</article>

    <article class="tool-card qotd-card-teaser" tabindex="0"
                            data-href="/tools/quote-of-the-day-widget-writing-motivation-favorites-embed-json-export-sniptext.html"
                            aria-labelledby="t-qotd" data-filter="Engagement & Productivity">
                            <div class="card-icon qotd-card-icon" aria-hidden="true">
                              <!-- Quote of the Day icon: quote bubble + calendar + refresh -->
                              <svg viewBox="0 0 24 24" class="svg-icon qotd-svg" role="img" aria-label="Quote of the Day icon" xmlns="http://www.w3.org/2000/svg">
                                <!-- quote bubble -->
                                <path d="M4 6.5c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2v5.2c0 1.1-.9 2-2 2H9.6L7 15.8c-.5.3-1.1-.1-1.1-.7v-1.4H6c-1.1 0-2-.9-2-2V6.5z"
                                      fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                                <!-- quote marks -->
                                <path d="M8.1 8.6c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1v-.2c0-1 .7-1.9 1.7-2.2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" fill="none"/>
                                <path d="M11.3 8.6c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1v-.2c0-1 .7-1.9 1.7-2.2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" fill="none"/>
                                <!-- small calendar pill -->
                                <rect x="15" y="3.6" width="6" height="5.2" rx="1.2" fill="none" stroke="currentColor" stroke-width="1.4"/>
                                <path d="M15 6h6" stroke="currentColor" stroke-width="1.2"/>
                                <path d="M17 3.5v2M19.9 3.5v2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                                <!-- refresh arrow (daily rotation) -->
                                <path d="M16.8 17.2a3.6 3.6 0 0 0 6.4-1.6" stroke="currentColor" stroke-width="1.4" fill="none" stroke-linecap="round"/>
                                <path d="M22 18.3l1-2.3-2.4.7" stroke="currentColor" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                            </div>
                            <h3 id="t-qotd" class="card-title qotd-card-title">Quote of the Day Widget - motivational and writing focused</h3>
                            <p class="card-desc qotd-card-desc">
                              Fresh, motivating quotes for writers and students that rotate daily. Pick categories like focus, creativity, revision, or mindset, switch calming themes, add gentle animations, save favorites, copy or share, and embed the widget on your site with a single snippet. Private and fast in your browser.
                            </p>
                            <a class="card-cta qotd-card-cta"
                              href="/tools/quote-of-the-day-widget-writing-motivation-favorites-embed-json-export-sniptext.html"
                              aria-label="Open Quote of the Day Widget">Open →</a>
                        </article>

    <article class="tool-card progressbar-tool-card" tabindex="0"
                                      data-href="/tools/text-progress-bar-maker.html"
                                      aria-labelledby="progressbar-tg" data-filter="Engagement & Productivity">
                                <div class="card-icon progressbar-card-icon" aria-hidden="true">
                                  <!-- Text Progress Bar Maker icon: linear bar + circular ring with percent -->
                                  <svg viewBox="0 0 24 24" class="svg-icon progressbar-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Text Progress Bar Maker">
                                    <!-- circular ring -->
                                    <circle cx="8" cy="8" r="5.5" fill="none" stroke="currentColor" stroke-width="1.6" opacity="0.35"/>
                                    <!-- progress arc -->
                                    <path d="M8 2.5
                                            A5.5 5.5 0 0 1 13.5 8"
                                          fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                                    <!-- tiny percent text dots -->
                                    <circle cx="7.2" cy="7.6" r="0.5" fill="currentColor"/>
                                    <circle cx="9.1" cy="7.6" r="0.5" fill="currentColor"/>
                                    <!-- linear track -->
                                    <rect x="3" y="16" width="18" height="3.2" rx="1.6" ry="1.6"
                                          fill="none" stroke="currentColor" stroke-width="1.4" opacity="0.35"/>
                                    <!-- linear fill -->
                                    <path d="M3 17.6h11.2" stroke="currentColor" stroke-width="3.2" stroke-linecap="round"/>
                                    <!-- milestone ticks -->
                                    <path d="M10 15.6v3.9" stroke="currentColor" stroke-width="1" />
                                    <path d="M15 15.6v3.9" stroke="currentColor" stroke-width="1" />
                                    <!-- subtle sparkle -->
                                    <path d="M18.6 5.2l.4-.8.4.8.8.4-.8.4-.4.8-.4-.8-.8-.4.8-.4z"
                                          stroke="currentColor" stroke-width="0.8" fill="none"/>
                                  </svg>
                                </div>
                                <h3 id="progressbar-tg" class="card-title progressbar-card-title">
                                  Text Progress Bar Maker - show percent completion
                                </h3>
                                <p class="card-desc progressbar-card-desc">
                                  Build smooth linear and circular progress bars for goals with gradients, stripes, glow, milestones, and labels. Live preview, rounded caps, percent decimals, copy-to-embed HTML, SVG export, PNG snapshot, and shareable URLs. Private, fast, and fully responsive.
                                </p>
                                <a class="card-cta progressbar-card-cta"
                                  href="/tools/text-progress-bar-maker.html"
                                  aria-label="Open Text Progress Bar Maker">Open →</a>
                            </article>

  </section>




  
<footer id="main-footer" class="site-footer" aria-labelledby="footer-heading">
  <!-- decorative background -->
  <div class="footer-bg" aria-hidden="true"></div>

  <div class="footer-container">
    <div class="footer-logo">
      <h2 id="footer-heading" class="footer-brand">Snip Text</h2>
      <p>Empowering better writing, one tool at a time.</p>
    </div>

    <nav class="footer-links" aria-label="Footer links">
      <a href="/feedback.html">Feedback</a>
      <a href="contact.html#contact">Contact Us</a>
      <a href="/privacy-policy.html">Privacy Policy</a>
      <a href="/terms-of-use.html">Terms of Use</a>
    </nav>

    <div class="footer-bottom">
      <p>
        &copy; <span id="year"></span>
        <span class="powered-by">
          Snip Text - powered by
          <a href="https://checkai.pro" target="_blank" rel="noopener">CheckAI.pro</a>
        </span>
        · All rights reserved.
      </p>
    </div>
  </div>

  <!-- back to top -->
  <button class="to-top" id="to-top" aria-label="Back to top">
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M12 5l-6 6m6-6l6 6M12 5v14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>
</footer>





  <!-- =========================
       SCRIPT
       ========================= -->
<script src="/js/index.js?v=reset1" defer></script>
  <script src="/js/auth.js?v=reset1"></script>
<script src="/tools/js/free-tools.js?v=reset1"></script>

<script>
/* ============================
   SnipText • Pomodoro Timer JS
   Private, client-side only
============================ */
(() => {
  // Elements
  const el = (id) => document.getElementById(id);
  const focusEl = el('pomo-focus');
  const shortEl = el('pomo-short');
  const longEl  = el('pomo-long');
  const autoEl  = el('pomo-auto');
  const longAfterEl = el('pomo-longafter');
  const chimeEl = el('pomo-chime');

  const clockEl = el('pomo-clock');
  const phaseEl = el('pomo-phase');
  const ringFg  = el('pomo-ring-fg');

  const startBtn = el('pomo-start');
  const pauseBtn = el('pomo-pause');
  const resetBtn = el('pomo-reset');

  const preset25 = el('pomo-preset-25');
  const preset50 = el('pomo-preset-50');
  const presetCustom = el('pomo-preset-custom');

  const todayEl = el('pomo-today');
  const sessionsEl = el('pomo-sessions');
  const streakEl = el('pomo-streak');
  const graphCanvas = el('pomo-graph');

  const copyBtn = el('pomo-copy');
  const exportBtn = el('pomo-export');
  const importBtn = el('pomo-import');

  const taskTitleEl = el('pomo-task-title');
  const taskEstEl   = el('pomo-task-est');
  const taskAddBtn  = el('pomo-task-add');
  const tasksEl     = el('pomo-tasks');

  const notifyBtn = el('pomo-notify');
  const focusModeBtn = el('pomo-focusmode');

  // Audio: chime + ambient (base64 tiny loops or generated via WebAudio)
  const chime = new Audio('data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA...'); // tiny silent placeholder
  chime.volume = 0.6;

  // Ambient via WebAudio API simple noise loops
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const gainNodes = {
    rain: audioCtx.createGain(),
    waves: audioCtx.createGain(),
    cafe: audioCtx.createGain()
  };
  Object.values(gainNodes).forEach(g => { g.gain.value = 0; g.connect(audioCtx.destination); });

  // Simple ambient generators
  function makeRain(ctx, gain){
    const node = ctx.createScriptProcessor(4096,1,1);
    node.onaudioprocess = (e) => {
      const out = e.outputBuffer.getChannelData(0);
      for (let i=0;i<out.length;i++) out[i] = (Math.random()*2-1)*0.03; // soft pink-ish noise
    };
    node.connect(gain);
    return node;
  }
  function makeWaves(ctx, gain){
    const osc = ctx.createOscillator();
    const mod = ctx.createOscillator();
    const mg  = ctx.createGain();
    mod.frequency.value = 0.1; mg.gain.value = 12;
    osc.frequency.value = 120;
    mod.connect(mg); mg.connect(osc.frequency); osc.connect(gain);
    osc.start(); mod.start();
    return osc;
  }
  function makeCafe(ctx, gain){
    const node = ctx.createScriptProcessor(2048,1,1);
    let t = 0;
    node.onaudioprocess = (e) => {
      const out = e.outputBuffer.getChannelData(0);
      for (let i=0;i<out.length;i++){
        t += 1;
        // soft murmur
        out[i] = (Math.sin(t*0.003)+Math.sin(t*0.0041)+Math.sin(t*0.0053))/12;
      }
    };
    node.connect(gain);
    return node;
  }

  const ambient = {
    rain: makeRain(audioCtx, gainNodes.rain),
    waves: makeWaves(audioCtx, gainNodes.waves),
    cafe: makeCafe(audioCtx, gainNodes.cafe),
  };

  // Ambient sliders
  const sRain  = el('pomo-sound-rain');
  const sWaves = el('pomo-sound-waves');
  const sCafe  = el('pomo-sound-cafe');
  [sRain, sWaves, sCafe].forEach(inp => {
    inp.addEventListener('input', () => {
      audioCtx.resume();
      if (inp === sRain)  gainNodes.rain.gain.value  = +inp.value * 0.6;
      if (inp === sWaves) gainNodes.waves.gain.value = +inp.value * 0.3;
      if (inp === sCafe)  gainNodes.cafe.gain.value  = +inp.value * 0.5;
      saveState();
    });
  });

  // State
  const state = {
    phase: 'focus', // focus | short | long
    focusMin: 25, shortMin: 5, longMin: 15,
    auto: false, longAfter: false, chime: false,
    remaining: 25*60, running: false, tickHandle: null,
    cycleCount: 0,
    stats: {
      days: {}, // YYYY-MM-DD: {minutes: number, sessions: number}
      streak: 0,
      lastDay: null
    },
    tasks: [],
    ambient: { rain: 0, waves: 0, cafe: 0 }
  };

  // Load/save
  function loadState(){
    const raw = localStorage.getItem('pomo-data-v1');
    if (!raw) return;
    try{
      const saved = JSON.parse(raw);
      Object.assign(state, saved, { tickHandle: null, running: false });
      // Apply UI
      focusEl.value = state.focusMin;
      shortEl.value = state.shortMin;
      longEl.value  = state.longMin;
      autoEl.checked = state.auto;
      longAfterEl.checked = state.longAfter;
      chimeEl.checked = state.chime;
      sRain.value = state.ambient?.rain ?? 0;
      sWaves.value = state.ambient?.waves ?? 0;
      sCafe.value = state.ambient?.cafe ?? 0;
      gainNodes.rain.gain.value  = +sRain.value  * 0.6;
      gainNodes.waves.gain.value = +sWaves.value * 0.3;
      gainNodes.cafe.gain.value  = +sCafe.value  * 0.5;
      renderTasks();
      renderStats();
      setPhase(state.phase);
      setTime(state.remaining);
      drawGraph();
    }catch(e){ console.warn('Load failed', e); }
  }
  function saveState(){
    state.focusMin = +focusEl.value;
    state.shortMin = +shortEl.value;
    state.longMin  = +longEl.value;
    state.auto = autoEl.checked;
    state.longAfter = longAfterEl.checked;
    state.chime = chimeEl.checked;
    state.ambient = { rain:+sRain.value, waves:+sWaves.value, cafe:+sCafe.value };
    localStorage.setItem('pomo-data-v1', JSON.stringify({
      phase: state.phase,
      focusMin: state.focusMin, shortMin: state.shortMin, longMin: state.longMin,
      auto: state.auto, longAfter: state.longAfter, chime: state.chime,
      remaining: state.remaining,
      cycleCount: state.cycleCount,
      stats: state.stats,
      tasks: state.tasks,
      ambient: state.ambient
    }));
  }

  // Helpers
  const fmt2 = (n) => n.toString().padStart(2,'0');
  function formatTime(sec){
    const m = Math.floor(sec/60), s = Math.floor(sec%60);
    return `${fmt2(m)}:${fmt2(s)}`;
  }
  function setPhase(p){
    state.phase = p;
    phaseEl.textContent = p === 'focus' ? 'Focus' : (p === 'short' ? 'Short break' : 'Long break');
    const total = (p === 'focus' ? state.focusMin : p === 'short' ? state.shortMin : state.longMin) * 60;
    state.remaining = Math.max(0, Math.min(state.remaining, total)) || total;
    updateRing();
    saveState();
  }
  function setTime(sec){
    state.remaining = sec;
    clockEl.textContent = formatTime(sec);
    updateRing();
  }
  function updateRing(){
    const r = 52, circ = 2*Math.PI*r; // 327 approx
    const total = (state.phase === 'focus' ? state.focusMin : state.phase === 'short' ? state.shortMin : state.longMin) * 60;
    const ratio = total ? (total - state.remaining) / total : 0;
    const offset = Math.max(0, Math.min(circ, circ - ratio*circ));
    ringFg.setAttribute('stroke-dasharray', String(circ));
    ringFg.setAttribute('stroke-dashoffset', String(offset));
  }

  // Tick loop
  function tick(){
    if (!state.running) return;
    if (state.remaining <= 0){
      onPhaseComplete();
      return;
    }
    setTime(state.remaining - 1);
    state.tickHandle = setTimeout(tick, 1000);
  }

  // Phase transition
  function onPhaseComplete(){
    // chime + notification
    if (state.chime) { try { chime.currentTime = 0; chime.play().catch(()=>{}); } catch(e){} }
    notify(`Time's up - ${phaseEl.textContent}`, 'Pomodoro finished');

    // stats if focus completed
    if (state.phase === 'focus'){
      // increment sessions and minutes
      const today = new Date();
      const key = today.toISOString().slice(0,10);
      const blockMin = state.focusMin;
      if (!state.stats.days[key]) state.stats.days[key] = { minutes: 0, sessions: 0 };
      state.stats.days[key].minutes += blockMin;
      state.stats.days[key].sessions += 1;
      // streak
      updateStreak(key);
      state.cycleCount += 1;
      renderStats(); drawGraph();
    }

    // next phase
    if (state.phase === 'focus'){
      if (state.longAfter && state.cycleCount % 4 === 0){
        setPhase('long');
      } else {
        setPhase('short');
      }
    } else {
      setPhase('focus');
    }

    // auto proceed or pause
    if (state.auto){
      setTime(state.remaining); // ensure UI sync
      state.tickHandle = setTimeout(tick, 1000);
    } else {
      pauseTimer();
    }
    saveState();
  }

  function updateStreak(todayKey){
    const last = state.stats.lastDay;
    if (!last){
      state.stats.streak = 1;
    } else {
      const d1 = new Date(last), d2 = new Date(todayKey);
      const diff = Math.round((d2 - d1) / 86400000);
      if (diff === 1) state.stats.streak += 1;
      else if (diff > 1) state.stats.streak = 1;
    }
    state.stats.lastDay = todayKey;
  }

  // Render
  function renderStats(){
    // today
    const key = new Date().toISOString().slice(0,10);
    const today = state.stats.days[key] || {minutes:0,sessions:0};
    todayEl.textContent = `${today.minutes}m`;
    sessionsEl.textContent = String(today.sessions);
    streakEl.textContent = String(state.stats.streak || 0);
  }

  // Graph simple draw
  function drawGraph(){
    const ctx = graphCanvas.getContext('2d');
    const W = graphCanvas.clientWidth, H = graphCanvas.clientHeight;
    graphCanvas.width = W * devicePixelRatio; graphCanvas.height = H * devicePixelRatio;
    ctx.scale(devicePixelRatio, devicePixelRatio);
    ctx.clearRect(0,0,W,H);

    // collect last 14 days
    const days = [];
    for (let i=13;i>=0;i--){
      const d = new Date(Date.now()-i*86400000).toISOString().slice(0,10);
      days.push({ key:d, val:(state.stats.days[d]?.minutes||0) });
    }
    const max = Math.max(30, ...days.map(d=>d.val));
    const barW = W/(days.length*1.6);

    ctx.lineWidth = 6; ctx.lineCap = 'round';
    days.forEach((d, i) => {
      const x = (i+0.8) * (W/days.length);
      const h = (d.val/max) * (H - 24);
      // bg bar
      ctx.strokeStyle = 'rgba(255,255,255,0.08)';
      ctx.beginPath(); ctx.moveTo(x, H-10); ctx.lineTo(x, 16); ctx.stroke();
      // value
      const grad = ctx.createLinearGradient(0,0,0,H);
      grad.addColorStop(0,'#3B82F6'); grad.addColorStop(1,'#ff7c4c');
      ctx.strokeStyle = grad;
      ctx.beginPath(); ctx.moveTo(x, H-10); ctx.lineTo(x, H-10-h); ctx.stroke();
    });
  }

  // Controls
  function startTimer(){
    if (state.running) return;
    state.running = true;
    tick();
  }
  function pauseTimer(){
    state.running = false;
    if (state.tickHandle){ clearTimeout(state.tickHandle); state.tickHandle = null; }
  }
  function resetTimer(){
    pauseTimer();
    setPhase(state.phase); // resets remaining to full phase length
    setTime((state.phase === 'focus' ? state.focusMin : state.phase === 'short' ? state.shortMin : state.longMin)*60);
    saveState();
  }

  // Presets
  preset25.addEventListener('click', () => {
    focusEl.value = 25; shortEl.value = 5; longEl.value = 15; setPhase('focus'); setTime(25*60); saveState();
  });
  preset50.addEventListener('click', () => {
    focusEl.value = 50; shortEl.value = 10; longEl.value = 20; setPhase('focus'); setTime(50*60); saveState();
  });
  presetCustom.addEventListener('click', () => {
    const f = prompt('Focus minutes', focusEl.value) || focusEl.value;
    const s = prompt('Short break minutes', shortEl.value) || shortEl.value;
    const l = prompt('Long break minutes', longEl.value) || longEl.value;
    focusEl.value = Math.max(1, +f); shortEl.value = Math.max(1, +s); longEl.value = Math.max(1, +l);
    setPhase('focus'); setTime(focusEl.value*60); saveState();
  });

  // Listeners
  [focusEl, shortEl, longEl, autoEl, longAfterEl, chimeEl].forEach(elm => {
    elm.addEventListener('change', () => {
      // clamp and apply
      focusEl.value = Math.min(180, Math.max(1, +focusEl.value||25));
      shortEl.value = Math.min(60, Math.max(1, +shortEl.value||5));
      longEl.value  = Math.min(90, Math.max(1, +longEl.value||15));
      setPhase(state.phase); // keep phase but sync total
      saveState();
    });
  });

  startBtn.addEventListener('click', startTimer);
  pauseBtn.addEventListener('click', pauseTimer);
  resetBtn.addEventListener('click', resetTimer);

  // Keyboard shortcuts
  window.addEventListener('keydown', (e) => {
    if (e.code === 'Space'){ e.preventDefault(); state.running ? pauseTimer() : startTimer(); }
    if (e.key.toLowerCase() === 'r'){ resetTimer(); }
    if (e.key.toLowerCase() === 'l'){ setPhase('long'); setTime(state.longMin*60); saveState(); }
    if (e.key.toLowerCase() === 'f'){ toggleFullscreen(); }
  });

  // Notifications
  notifyBtn.addEventListener('click', async () => {
    try{
      const res = await Notification.requestPermission();
      alert(res === 'granted' ? 'Notifications enabled' : 'Please allow notifications in your browser');
    }catch(e){
      alert('Notifications not supported here');
    }
  });
  function notify(title, body){
    if (!('Notification' in window)) return;
    if (Notification.permission === 'granted'){
      new Notification(title, { body, icon:'/favicon.png' });
    }
  }

  // Fullscreen focus
  function toggleFullscreen(){
    const el = document.documentElement;
    if (!document.fullscreenElement){
      el.requestFullscreen?.();
    } else {
      document.exitFullscreen?.();
    }
  }
  focusModeBtn.addEventListener('click', toggleFullscreen);

  // Tasks
  function renderTasks(){
    tasksEl.innerHTML = '';
    state.tasks.forEach((t, idx) => {
      const row = document.createElement('div');
      row.className = 'pomo-task';
      row.innerHTML = `
        <input type="checkbox" ${t.done?'checked':''} aria-label="Mark done">
        <div>
          <div class="pomo-task-title">${t.title}</div>
          <div class="pomo-task-meta">${t.done?'Completed':'Est.'} ${t.est} pomo${t.est>1?'s':''}</div>
        </div>
        <div class="pomo-task-actions">
          <button class="pomo-btn inline" data-act="inc">+1</button>
          <button class="pomo-btn inline" data-act="edit">Edit</button>
          <button class="pomo-btn inline" data-act="del">Delete</button>
        </div>
      `;
      row.querySelector('input').addEventListener('change', (ev) => {
        state.tasks[idx].done = ev.target.checked; saveState(); renderTasks();
      });
      row.querySelector('[data-act="inc"]').addEventListener('click', () => {
        state.tasks[idx].est += 1; saveState(); renderTasks();
      });
      row.querySelector('[data-act="edit"]').addEventListener('click', () => {
        const nt = prompt('Task title', state.tasks[idx].title) ?? state.tasks[idx].title;
        const ne = +prompt('Estimated pomos', state.tasks[idx].est) || state.tasks[idx].est;
        state.tasks[idx].title = nt; state.tasks[idx].est = Math.max(1, ne);
        saveState(); renderTasks();
      });
      row.querySelector('[data-act="del"]').addEventListener('click', () => {
        state.tasks.splice(idx,1); saveState(); renderTasks();
      });
      tasksEl.appendChild(row);
    });
  }
  taskAddBtn.addEventListener('click', () => {
    const title = taskTitleEl.value.trim();
    const est = Math.max(1, +taskEstEl.value || 1);
    if (!title) return;
    state.tasks.push({ title, est, done:false });
    taskTitleEl.value = ''; taskEstEl.value = 1;
    saveState(); renderTasks();
  });

  // Export/Import
  copyBtn.addEventListener('click', async () => {
    const summary = buildSummary();
    try{ await navigator.clipboard.writeText(summary); alert('Summary copied'); }
    catch{ alert('Copy failed'); }
  });
  exportBtn.addEventListener('click', () => {
    const blob = new Blob([localStorage.getItem('pomo-data-v1')||'{}'], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'sniptext-pomodoro-data.json';
    a.click(); URL.revokeObjectURL(url);
  });
  importBtn.addEventListener('click', async () => {
    const inp = document.createElement('input'); inp.type='file'; inp.accept='application/json';
    inp.onchange = async () => {
      const file = inp.files?.[0]; if (!file) return;
      const text = await file.text();
      localStorage.setItem('pomo-data-v1', text); loadState();
      alert('Data imported');
    };
    inp.click();
  });

  function buildSummary(){
    const d = new Date().toISOString().slice(0,10);
    const today = state.stats.days[d] || {minutes:0, sessions:0};
    return [
      `SnipText Pomodoro summary`,
      `Date: ${d}`,
      `Focus today: ${today.minutes} minutes`,
      `Sessions: ${today.sessions}`,
      `Streak: ${state.stats.streak || 0} day(s)`,
      `Tasks:`,
      ...state.tasks.map(t => `- ${t.title} (${t.est} pomo${t.est>1?'s':''}) ${t.done?'[done]':''}`)
    ].join('\n');
  }

  // Init
  setPhase('focus');
  setTime(state.focusMin*60);
  loadState();
  window.addEventListener('resize', drawGraph);
})();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GE98V48RK8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GE98V48RK8');
  </script>

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "t5y2d08vd0");
  </script>
  <meta name="msvalidate.01" content="A9EB890789B5C28E62629F99EEDC30A1" />

  <!-- Essentials -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <base href="/tools/">

  <!-- Primary SEO -->
  <title>Typing Speed Test - WPM, Accuracy, Error Heatmap, Rolling Graph | SnipText</title>
  <meta name="description" content="Free Typing Speed Test by SnipText. Measure WPM, corrected WPM, CPM, and accuracy with a rolling WPM graph and per-key error heatmap. Choose quotes, random words, or code, toggle punctuation and numbers, set custom durations, and export results. Private and client-side." />
  <meta name="keywords" content="typing speed test, wpm test, typing accuracy, cpm, corrected wpm, typing practice, error heatmap, rolling wpm graph, quotes test, code typing test, random words typing test, custom duration typing" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://checkai.pro/tools/typing-speed-test" />
  <link rel="alternate" href="https://checkai.pro/tools/typing-speed-test" hreflang="en" />
  <link rel="alternate" href="https://checkai.pro/tools/typing-speed-test" hreflang="x-default" />

  <!-- Styling -->
  <link rel="stylesheet" href="/css/style.css?v=reset1" />
  <link rel="stylesheet" href="/tools/css/free-tools.css?v=reset1" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="SnipText" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="Typing Speed Test - WPM, Accuracy, Error Heatmap, Rolling Graph" />
  <meta property="og:description" content="Measure WPM, CPM, and accuracy with live feedback and pro features. Private, fast, and runs in your browser." />
  <meta property="og:url" content="https://checkai.pro/tools/typing-speed-test" />
  <meta property="og:image" content="https://checkai.pro/images/sniptext-default-tools-img" />
  <meta property="og:image:secure_url" content="https://checkai.pro/images/sniptext-default-tools-img" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="SnipText tool preview" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Typing Speed Test - WPM, Accuracy, Error Heatmap, Rolling Graph" />
  <meta name="twitter:description" content="Quotes, words, or code modes with smart toggles. Client-side and private." />
  <meta name="twitter:image" content="https://checkai.pro/images/sniptext-default-tools-img" />

  <!-- Theme / Icons -->
  <meta name="theme-color" content="#0F172A" />
  <link rel="icon" href="/favicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- JSON-LD: WebApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"SnipText Typing Speed Test",
    "url":"https://checkai.pro/tools/typing-speed-test",
    "applicationCategory":"UtilitiesApplication",
    "operatingSystem":"All",
    "isAccessibleForFree":true,
    "featureList":[
      "WPM, corrected WPM, CPM, accuracy",
      "Rolling WPM mini graph",
      "Per-key error heatmap",
      "Quotes, words, and code modes",
      "Punctuation and numbers toggles",
      "Custom duration and difficulty",
      "Personal bests and export"
    ],
    "publisher":{
      "@type":"Organization",
      "name":"Snip Text",
      "logo":{"@type":"ImageObject","url":"https://checkai.pro/favicon.png","width":512,"height":512}
    }
  }
  </script>

  <!-- JSON-LD: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Is the Typing Speed Test private?","acceptedAnswer":{"@type":"Answer","text":"Yes. It runs locally in your browser. No data is uploaded."}},
      {"@type":"Question","name":"What is corrected WPM?","acceptedAnswer":{"@type":"Answer","text":"Corrected WPM subtracts uncorrected errors from raw speed, giving a better measure of accurate typing."}},
      {"@type":"Question","name":"Can I practice code and punctuation?","acceptedAnswer":{"@type":"Answer","text":"Yes. Switch to Code mode and enable punctuation and numbers to match real programming conditions."}},
      {"@type":"Question","name":"How are personal bests saved?","acceptedAnswer":{"@type":"Answer","text":"Best results are stored in your browser storage so they stay private and load instantly."}}
    ]
  }
  </script>

  <!-- JSON-LD: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://checkai.pro/"},
      {"@type":"ListItem","position":2,"name":"Tools","item":"https://checkai.pro/tools/free-tools.html"},
      {"@type":"ListItem","position":3,"name":"Typing Speed Test","item":"https://checkai.pro/tools/typing-speed-test"}
    ]
  }
  </script>

  <style>
/* ==========================================================
   SnipText â€¢ TYPING SPEED TEST
   Role-model aligned, brand-aware, HTML unchanged
   (All tokens kept under --typing-* or your global brand vars)
========================================================== */

:root{
  /* Brand palette (already in your project) */
  --color-primary:#1D4ED8;
  --color-accent:#3B82F6;
  --color-bg-light:#F3F4F6;
  --color-bg-dark:#0F172A;
  --color-white:#ffffff;
  --color-text-dark:#1F2937;
  --color-text-light:#6B7280;
  --color-border:#E5E7EB;
  --color-used-often:#e85d27;
  --color-footer-bg:#1d1f2f;
  --gradient-cta-start:var(--color-accent);
  --gradient-cta-end:#ff7c4c;
  --font-heading:'Poppins','Segoe UI',sans-serif;
  --font-body:'Roboto','Arial',sans-serif;

  /* Typing theme (tool-scoped) */
  --typing-bg:
    radial-gradient(1200px 700px at 12% -10%, rgba(59,130,246,.18), transparent 60%),
    radial-gradient(900px 600px at 110% 0%, rgba(29,78,216,.14), transparent 60%),
    radial-gradient(900px 700px at 50% 120%, rgba(255,124,76,.12), transparent 60%),
    linear-gradient(180deg,#0b1224 0%, #0F172A 65%, #0b1224 100%);
  --typing-surface:#0b1428;
  --typing-surface-2:#101a35;
  --typing-text:#e6ebf5;
  --typing-muted:#94a3b8;
  --typing-border:rgba(255,255,255,.10);
  --typing-focus:#60a5fa;
  --typing-good:#22c55e;
  --typing-warn:#f59e0b;
  --typing-bad:#ef4444;
  --typing-chip:#0f1a34;
  --typing-glow:rgba(59,130,246,.25);
  --typing-shadow:0 16px 40px rgba(2,6,23,.5);

  /* Components */
  --typing-radius-lg:20px;
  --typing-radius:14px;
  --typing-shadow-md:0 12px 30px rgba(0,0,0,.35);
  --typing-ease:cubic-bezier(.22,.61,.36,1);
  --typing-dur:240ms;

  /* CTA gradient */
  --typing-cta: linear-gradient(135deg,var(--gradient-cta-start),var(--gradient-cta-end));
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--typing-text);
  font-family:var(--font-body);
  background:var(--typing-bg);
  background-attachment:fixed,fixed,fixed,fixed;
  min-height:100dvh;
  line-height:1.6;
}

/* Page wrap */
.typingwrap{
  max-width:1120px;
  margin:0 auto;
  padding:28px clamp(16px,2vw,28px) 90px;
}

/* --------------------------------
   HERO (glassy, icon badge, gradient title)
----------------------------------- */
.typing-hero{
  display:grid; grid-template-columns:72px 1fr; gap:16px; align-items:center;
  margin:8px 0 22px;
  padding:16px;
  border:1px solid var(--typing-border);
  border-radius:var(--typing-radius-lg);
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  backdrop-filter:blur(10px);
  box-shadow:var(--typing-shadow);
  animation:typing-fade-up 480ms var(--typing-ease) both;
}
.typing-hero-icon{
  width:64px;height:64px;display:grid;place-items:center;border-radius:16px;
  background:linear-gradient(135deg,var(--color-primary),var(--color-accent));
  box-shadow:0 18px 40px var(--typing-glow);
}
.typing-hero-icon svg{width:30px;height:30px}
.typing-title{
  margin:0;
  font-family:var(--font-heading);
  font-weight:800; letter-spacing:.2px;
  font-size:clamp(22px,2.3vw,34px); line-height:1.15;
  background:linear-gradient(90deg,#fff,
    color-mix(in oklab, var(--color-accent) 60%, #fff) 45%,
    color-mix(in oklab, var(--gradient-cta-end) 48%, #fff) 85%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.typing-sub{margin:6px 0 0;color:var(--typing-muted);max-width:82ch}

/* --------------------------------
   GRID LAYOUT
----------------------------------- */
.typing-grid{display:grid;grid-template-columns:1.25fr .75fr;gap:18px}
@media (max-width:980px){.typing-grid{grid-template-columns:1fr}}

/* --------------------------------
   CARDS
----------------------------------- */
.typing-card{
  background:linear-gradient(180deg,var(--typing-surface-2),var(--typing-surface));
  border:1px solid var(--typing-border);
  border-radius:var(--typing-radius-lg);
  padding:16px;
  box-shadow:var(--typing-shadow-md);
  animation:typing-fade-in 360ms var(--typing-ease) both;
}
.typing-row{display:grid;gap:12px;margin-bottom:14px}
.typing-row.cols-2{grid-template-columns:1fr 1fr}
.typing-row.cols-3{grid-template-columns:1fr 1fr 1fr}
@media (max-width:720px){.typing-row.cols-2,.typing-row.cols-3{grid-template-columns:1fr}}

label.typing-label{
  display:block;font-weight:700;font-family:var(--font-heading);
  font-size:.95rem;margin-bottom:6px; letter-spacing:.2px; color:#e9eefc;
}

/* --------------------------------
   INPUTS / SELECTS / TOGGLES
----------------------------------- */
.typing-input,.typing-select,.typing-btn,.typing-toggle{
  outline:none;border-radius:12px;border:1px solid var(--typing-border);
  transition:border-color var(--typing-dur) var(--typing-ease),
           box-shadow var(--typing-dur) var(--typing-ease),
           transform 120ms ease, background var(--typing-dur), opacity 120ms ease;
}
.typing-input,.typing-select{
  width:100%;padding:10px 12px;background:#0b1224;color:var(--typing-text)
}
.typing-input:focus,.typing-select:focus{
  border-color:var(--typing-focus);
  box-shadow:0 0 0 4px rgba(96,165,250,.16);
  transform:translateY(-1px)
}
.typing-input::placeholder{color:#7c87a3}
.typing-help{color:var(--typing-muted);font-size:.88rem}

/* Pills (checkbox labels as chips) */
.typing-toggle.typing-btn{
  justify-content:center;
  background:#0b1224; color:var(--typing-text);
}
.typing-toggle input:checked + span,
.typing-toggle[aria-pressed="true"]{
  color:#fff;
  background:linear-gradient(180deg, rgba(59,130,246,.18), rgba(255,124,76,.18));
  border-color:rgba(59,130,246,.45);
  box-shadow:0 0 0 3px rgba(59,130,246,.15) inset;
}

/* --------------------------------
   BUTTONS
----------------------------------- */
.typing-btn{
  display:inline-flex;align-items:center;gap:10px;
  padding:10px 14px;background:#0b1224;color:var(--typing-text);
  cursor:pointer;user-select:none;font-weight:600
}
.typing-btn.primary{
  background:var(--typing-cta);
  border-color:transparent; color:#0b0f2c;
  box-shadow:0 14px 32px rgba(59,130,246,.30)
}
.typing-btn:hover{transform:translateY(-2px)}
.typing-btn:active{transform:translateY(0);opacity:.96}
.typing-btn[disabled]{opacity:.55;cursor:not-allowed}

/* Secondary links styled as buttons on right card */
.typing-card a.typing-btn{ text-decoration:none }

/* Small info chips */
.typing-chip{
  display:inline-flex;align-items:center;gap:6px;
  padding:6px 10px;border-radius:999px;
  background:var(--typing-chip);border:1px solid var(--typing-border);
  font-size:.82rem;color:var(--typing-text)
}

/* --------------------------------
   STAGE (typing area)
----------------------------------- */
.typing-stage{
  border:1px dashed var(--typing-border);
  background:#0b1224;border-radius:12px;padding:14px;min-height:170px;position:relative;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
.typing-text{
  font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size:1.02rem;line-height:1.8;word-wrap:break-word;
}
.typing-text .pending{color:#9aa6bf}
.typing-text .correct{color:#e6ffe8}
.typing-text .wrong{
  color:#ffd9d9;background:rgba(239,68,68,.12);
  border-bottom:1px solid rgba(239,68,68,.55); border-radius:4px;
  box-shadow:0 0 0 2px rgba(239,68,68,.10) inset;
}
/* Caret with glow pulse */
.typing-caret{
  position:absolute;width:2px;background:var(--typing-focus);
  height:1.35em;transform:translateY(.2em);
  box-shadow:0 0 12px rgba(96,165,250,.55);
  animation:typing-caret 1s steps(1) infinite;
}
@keyframes typing-caret{50%{opacity:0}}

/* --------------------------------
   STATS / GAUGES / GRAPH
----------------------------------- */
.typing-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.typing-stat{
  display:grid;gap:6px;padding:12px;
  border:1px solid var(--typing-border);
  border-radius:12px;background:#0b1224
}
.typing-stat .big{font-family:ui-monospace, Menlo, monospace;font-size:1.35rem}
.typing-gauge{
  height:64px;border:1px solid var(--typing-border);
  border-radius:12px;background:#0b1224;display:grid;place-items:center;
  font-weight:800; letter-spacing:.3px
}
.typing-graph{
  height:110px;border:1px solid var(--typing-border);
  border-radius:12px;background:
    linear-gradient(180deg, rgba(255,255,255,.028), transparent 60%);
}

/* --------------------------------
   HEATMAP
----------------------------------- */
.typing-heatmap{display:grid;grid-template-columns:repeat(10,1fr);gap:6px}
.typing-key{
  height:28px;border-radius:6px;
  border:1px solid var(--typing-border);
  display:grid;place-items:center;background:#0b1224;font-size:.8rem;color:#e6ebf5
}
.typing-key.bad{background:rgba(239,68,68,.16);border-color:rgba(239,68,68,.5)}
.typing-key.warn{background:rgba(245,158,11,.16);border-color:rgba(245,158,11,.5)}

/* --------------------------------
   FOOTER NOTE
----------------------------------- */
.typing-footer-note{color:var(--typing-muted);font-size:.9rem;margin-top:10px}

/* --------------------------------
   SELECTION / SCROLLBARS
----------------------------------- */
::selection{ background: color-mix(in oklab, var(--color-accent) 28%, transparent) }
.typing-stage ::selection{ background: color-mix(in oklab, var(--color-accent) 40%, transparent) }

@supports (scrollbar-width: thin){
  .typingwrap *{ scrollbar-width: thin; scrollbar-color: rgba(255,255,255,.25) transparent; }
}
.typingwrap *::-webkit-scrollbar{ height:10px; width:10px }
.typingwrap *::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.25); border-radius:999px }

/* --------------------------------
   ANIMATION / ACCESSIBILITY
----------------------------------- */
@keyframes typing-fade-up{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
@keyframes typing-fade-in{from{opacity:0}to{opacity:1}}

:where(.typing-btn,.typing-input,.typing-select,.typing-toggle){
  outline:none;
}
:where(.typing-btn,.typing-input,.typing-select,.typing-toggle):focus-visible{
  outline:2px solid color-mix(in oklab, var(--color-accent) 60%, white);
  outline-offset:2px;
}

@media (prefers-reduced-motion: reduce){
  .typing-btn,.typing-card,.typing-hero{transition:none !important;animation:none !important}
}

.feature-card-all-pages {margin: 0 2rem;}
.tools-grid {margin: 1rem; background: #0e1730;}
.tool-card {background: #0f1b34;}
@media (max-width: 600px) { .tools-grid {margin: 1rem 0;} }
  </style>
</head>
<body>

  <!-- Simple nav (keep your global navbar/footer styles unchanged if you include them) -->
  <nav id="main-navbar">
    <div class="nav-container">
      <div class="logo"><a href="/index.html">Snip Text</a></div>
      <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
      <ul class="nav-links" id="nav-links">
        <li><a href="/index.html">Home</a></li>
        <li><a href="/tools/free-tools.html">Free Tools</a></li>
        <li><a href="features.html">Features</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="/blog/blog.html">Blog</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a id="nav-dashboard-link" href="login.html">Dashboard</a></li>
        <li><a id="nav-logout-link" href="#" style="display:none;">Logout</a></li>
      </ul>
    </div>
  </nav>



<main class="typingwrap" itemscope itemtype="https://schema.org/SoftwareApplication">
  <!-- Hero -->
  <div class="typing-hero">
    <div class="typing-hero-icon" aria-hidden="true">
      <!-- Typing icon: keyboard + speed spark -->
      <svg width="34" height="34" viewBox="0 0 24 24" role="img" aria-label="Typing Speed Icon" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="6" width="18" height="12" rx="2" stroke="white" stroke-width="1.6"/>
        <path d="M6 9h2M10 9h2M14 9h2M18 9h1" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
        <path d="M5.5 13h3M9.5 13h3M13.5 13h3M17.5 13h1" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
        <path d="M19.5 4.2l.5-1 .5 1 1 .5-1 .5-.5 1-.5-1-1-.5 1-.5z" stroke="white" stroke-width="1"/>
      </svg>
    </div>
    <div>
      <h1 class="typing-title" itemprop="name">Typing Speed Test - WPM, accuracy</h1>
      <p class="typing-sub" itemprop="description">Measure WPM, CPM, corrected WPM, and accuracy with a rolling WPM graph and per-key error heatmap. Choose quotes, words, or code, toggle punctuation and numbers, set custom duration, and export results. Private and fast.</p>
    </div>
  </div>

  <section class="typing-grid" aria-label="Typing Speed Test workspace">
    <!-- Left: Test -->
    <div class="typing-card">
      <!-- Controls -->
      <div class="typing-row cols-3">
        <div>
          <label class="typing-label" for="typing-mode">Mode</label>
          <select id="typing-mode" class="typing-select" aria-label="Typing content mode">
            <option value="words">Random words</option>
            <option value="quotes">Quotes</option>
            <option value="code">Code</option>
          </select>
        </div>
        <div>
          <label class="typing-label" for="typing-duration">Duration</label>
          <select id="typing-duration" class="typing-select" aria-label="Test duration">
            <option value="30">30s</option>
            <option value="60" selected>60s</option>
            <option value="120">120s</option>
            <option value="custom">Customâ€¦</option>
          </select>
        </div>
        <div>
          <label class="typing-label" for="typing-difficulty">Difficulty</label>
          <select id="typing-difficulty" class="typing-select" aria-label="Difficulty">
            <option value="balanced" selected>Balanced</option>
            <option value="gentle">Gentle</option>
            <option value="spicy">Spicy</option>
          </select>
        </div>
      </div>

      <div class="typing-row cols-3">
        <label class="typing-toggle typing-btn" style="justify-content:center">
          <input id="typing-punct" type="checkbox" hidden />
          <span>Include punctuation</span>
        </label>
        <label class="typing-toggle typing-btn" style="justify-content:center">
          <input id="typing-numbers" type="checkbox" hidden />
          <span>Include numbers</span>
        </label>
        <label class="typing-toggle typing-btn" style="justify-content:center">
          <input id="typing-blind" type="checkbox" hidden />
          <span>Blind mode (hide typed)</span>
        </label>
      </div>

      <!-- Stage -->
      <div class="typing-row">
        <div class="typing-stage" id="typing-stage" aria-live="polite">
          <div id="typing-caret" class="typing-caret" style="left:8px;top:14px;"></div>
          <div id="typing-text" class="typing-text" aria-label="Typing text goes here"></div>
          <!-- Hidden input to capture keystrokes for mobile -->
          <input id="typing-capture" class="typing-input" style="position:absolute;opacity:0;pointer-events:none;height:0;width:0" aria-hidden="true" />
        </div>
        <div class="typing-help">Press any key to start. Backspace fixes mistakes. Tab or click Restart to try again.</div>
      </div>

      <!-- Actions -->
      <div class="typing-row cols-3">
        <button id="typing-start" class="typing-btn primary" aria-label="Start test">Start</button>
        <button id="typing-restart" class="typing-btn" aria-label="Restart test">Restart</button>
        <button id="typing-pause" class="typing-btn" aria-label="Pause or resume">Pause</button>
      </div>

      <!-- Stats -->
      <div class="typing-row">
        <div class="typing-stats">
          <div class="typing-stat">
            <div>WPM</div>
            <div class="big" id="typing-wpm">0</div>
            <div class="typing-help">Corrected WPM</div>
          </div>
          <div class="typing-stat">
            <div>Accuracy</div>
            <div class="big" id="typing-acc">100%</div>
            <div class="typing-help">Correct vs total</div>
          </div>
          <div class="typing-stat">
            <div>CPM</div>
            <div class="big" id="typing-cpm">0</div>
            <div class="typing-help">Characters per minute</div>
          </div>
        </div>
      </div>

      <div class="typing-row">
        <div class="typing-gauge">
          <span id="typing-timer">01:00</span>
        </div>
      </div>

      <div class="typing-row">
        <canvas id="typing-graph" class="typing-graph" aria-label="Rolling WPM graph"></canvas>
      </div>

      <div class="typing-row cols-3">
        <button id="typing-copy" class="typing-btn">Copy results</button>
        <button id="typing-export" class="typing-btn">Download .json</button>
        <button id="typing-share" class="typing-btn">Share</button>
      </div>

      <p class="typing-footer-note">Private by design - everything runs locally. Toggle punctuation and numbers to match your real world typing. Code mode uses balanced snippets.</p>
    </div>

    <!-- Right: Insights -->
    <div class="typing-card">
      <div class="typing-row">
        <label class="typing-label">Per-key error heatmap</label>
        <div id="typing-heatmap" class="typing-heatmap"></div>
      </div>

      <div class="typing-row cols-2">
        <div class="typing-chip">Raw WPM: <span id="typing-rawwpm">0</span></div>
        <div class="typing-chip">Errors: <span id="typing-errors">0</span></div>
      </div>
      <div class="typing-row cols-2">
        <div class="typing-chip">Backspaces: <span id="typing-backs">0</span></div>
        <div class="typing-chip">Corrected chars: <span id="typing-correct">0</span></div>
      </div>

      <div class="typing-row">
        <label class="typing-label">Personal bests</label>
        <div id="typing-bests" class="typing-history typing-help">No runs yet. Your best scores will appear here.</div>
      </div>

      <div class="typing-row cols-2">
        <a class="typing-btn" href="/tools/word-counter.html">Word & Character Counter</a>
        <a class="typing-btn" href="/tools/random-text-generator.html">Random Text Generator</a>
      </div>
      <div class="typing-row cols-2">
        <a class="typing-btn" href="/tools/whitespace-and-formatting-cleaner.html">Whitespace Cleaner</a>
        <a class="typing-btn" href="/blog/daily-writing-challenge-random-prompt-every-24-hours-streaks-focus-timer-guide-sniptext-blog.html">Daily Writing Guide</a>
      </div>
    </div>
  </section>

  <meta itemprop="operatingSystem" content="All" />
  <meta itemprop="applicationCategory" content="UtilitiesApplication" />


      <div class="free-tools-guide">
    <p class="free-tools-guide-p">See Typing Speed Test Guide on SnipText Blog Page <a href="/blog/typing-speed-test-wpm-accuracy-cpm-corrected-wpm-rolling-graph-error-heatmap-guide-sniptext-blog.html" class="free-tools-blog-link">here</a>.</p>
  </div>
</main>

<!-- TOOLS GRID -->
       <div class="feature-card-all-pages">
        <h1 class="feature-card-all-pages-para">Featured Tools</h1>
       </div>
  <section id="tools-grid" class="tools-grid" aria-label="Tools list">
    <!-- Tool cards - 10 items -->

    <article class="tool-card pomodoro-tool-card" tabindex="0"
                          data-href="/tools/pomodoro-timer.html"
                          aria-labelledby="pomodoro-tg" data-filter="Engagement & Productivity">
                          <div class="card-icon pomodoro-card-icon" aria-hidden="true">
                            <!-- Pomodoro Timer icon: tomato + clock ring + hand -->
                            <svg viewBox="0 0 24 24" class="svg-icon pomodoro-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Pomodoro Timer">
                              <!-- tomato crown -->
                              <path d="M12 6c1.7-2.1 4.4-3.2 6.8-3.2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" fill="none"/>
                              <path d="M12 6C10.3 3.9 7.6 2.8 5.2 2.8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" fill="none"/>
                              <!-- tomato/clock body -->
                              <circle cx="12" cy="14" r="8" fill="none" stroke="currentColor" stroke-width="1.6"/>
                              <!-- minute ticks -->
                              <g stroke="currentColor" stroke-width="1">
                                <path d="M12 6.5v1.6" />
                                <path d="M17.3 8.1l-.8 1.4" />
                                <path d="M19.9 13.4h-1.6" />
                                <path d="M17.3 18.7l-1.4-.8" />
                                <path d="M12 21.5v-1.6" />
                                <path d="M6.7 18.7l1.4-.8" />
                                <path d="M4.1 13.4h1.6" />
                                <path d="M6.7 8.1l.8 1.4" />
                              </g>
                              <!-- clock hand -->
                              <path d="M12 14V10m0 4l3 2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" fill="none"/>
                              <!-- tiny focus spark -->
                              <path d="M19.2 5.8l.5-1 .5 1 1 .5-1 .5-.5 1-.5-1-1-.5 1-.5z" stroke="currentColor" stroke-width="1" fill="none"/>
                            </svg>
                          </div>
                          <h3 id="pomodoro-tg" class="card-title pomodoro-card-title">Pomodoro Timer - focus cycles, tasks, streaks</h3>
                          <p class="card-desc pomodoro-card-desc">
                            Set calm focus blocks with auto short and long breaks, plan tasks with quick estimates, mix gentle ambient sounds, and track streaks with clean stats. Keyboard shortcuts, fullscreen focus, and private client-side storage keep it fast and distraction free.
                          </p>
                          <a class="card-cta pomodoro-card-cta"
                            href="/tools/pomodoro-timer.html"
                            aria-label="Open Pomodoro Timer">Open â†’</a>
                    </article>

    <article class="tool-card" tabindex="0" data-href="/tools/word-counter.html"  aria-labelledby="t1" data-filter="Text & Writing Tools">
          <div class="card-icon" aria-hidden="true">
            <!-- Document + counter icon -->
            <svg viewBox="0 0 24 24" class="svg-icon" role="img" aria-label="Word and Character Counter icon">
              <!-- Document outline -->
              <rect x="4" y="3" width="14" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
              <!-- Text lines -->
              <line x1="7" y1="8" x2="15" y2="8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <line x1="7" y1="12" x2="13" y2="12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <line x1="7" y1="16" x2="11" y2="16" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <!-- Counter circle -->
              <circle cx="19" cy="19" r="4" stroke="currentColor" stroke-width="1.4" fill="none"/>
              <!-- Counter tick/check -->
              <path d="M17.8 19l1.2 1.2 2-2.2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 id="t1" class="card-title">Word & Character Counter</h3>
          <p class="card-desc">Instantly count words, characters, sentences and lines. Live updates as you type or paste text.</p>
          <a class="card-cta" href="/tools/word-counter.html" aria-label="Open Word & Character Counter">Open â†’</a>
      </article>

    <article class="tool-card" tabindex="0" data-href="/tools/random-text-generator.html" aria-labelledby="t10" data-filter="Formatting & Cleaning">
          <div class="card-icon" aria-hidden="true">
            <!-- Random Text Generator Icon -->
            <svg viewBox="0 0 24 24" class="svg-icon" role="img" aria-label="Random Text Generator icon">
              <!-- Random scattered lines -->
              <line x1="4" y1="6" x2="14" y2="6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <line x1="10" y1="10" x2="20" y2="10" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <line x1="6" y1="14" x2="16" y2="14" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <line x1="8" y1="18" x2="18" y2="18" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <!-- Shuffle arrows -->
              <path d="M3 12h3l2-2m-2 4l2-2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 12h-3l-2-2m2 4l-2-2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 id="t10" class="card-title">Random Text Generator</h3>
          <p class="card-desc">Generate placeholder text: lorem ipsum, short sentences, and dummy paragraphs for testing layouts.</p>
          <a class="card-cta" href="/tools/random-text-generator.html" aria-label="Open Random Text Generator">Open â†’</a>
      </article>

    <article class="tool-card writingchallenge-tool-card" tabindex="0"
                data-href="/tools/daily-writing-challenge.html"
                aria-labelledby="writingchallenge-tg" data-filter="Engagement & Productivity">
                <div class="card-icon writingchallenge-card-icon" aria-hidden="true">
                  <!-- Daily Writing Challenge icon: calendar + pen nib + spark -->
                  <svg viewBox="0 0 24 24" class="svg-icon writingchallenge-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Daily Writing Challenge">
                    <!-- calendar frame -->
                    <rect x="3" y="4" width="14" height="14" rx="2" fill="none" stroke="currentColor" stroke-width="1.6"/>
                    <path d="M3 7.5h14" stroke="currentColor" stroke-width="1.4" />
                    <!-- calendar rings -->
                    <path d="M7 3v3M13 3v3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                    <!-- day dots -->
                    <circle cx="6.8" cy="10.2" r="0.8" fill="currentColor"/>
                    <circle cx="10"  cy="10.2" r="0.8" fill="currentColor"/>
                    <circle cx="13.2" cy="10.2" r="0.8" fill="currentColor"/>
                    <circle cx="6.8" cy="13.4" r="0.8" fill="currentColor"/>
                    <circle cx="10"  cy="13.4" r="0.8" fill="currentColor"/>
                    <!-- pen nib (daily writing) -->
                    <path d="M19.5 13.5l2.6 2.6-5.8 5.4c-.3.3-.7.4-1.1.3l-1.8-.6c-.2-.1-.2-.3-.1-.5l.7-1.7c.1-.3.3-.6.5-.8l5-4.7z" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                    <circle cx="17.9" cy="15.1" r="0.7" fill="currentColor"/>
                    <!-- spark of inspiration -->
                    <path d="M19.2 6.2l.5-1 .5 1 1 .5-1 .5-.5 1-.5-1-1-.5 1-.5z" stroke="currentColor" stroke-width="1" fill="none"/>
                  </svg>
                </div>
                <h3 id="writingchallenge-tg" class="card-title writingchallenge-card-title">Daily Writing Challenge - Random Prompt Every 24 Hours</h3>
                <p class="card-desc writingchallenge-card-desc">
                  Get a fresh prompt each day, pick categories and difficulty, track streaks with a mini calendar, and bank gentle rerolls. Write in a built-in editor with a focus timer, then copy or download your work. Private and fast - runs entirely in your browser.
                </p>
                <a class="card-cta writingchallenge-card-cta"
                  href="/tools/daily-writing-challenge.html"
                  aria-label="Open Daily Writing Challenge">Open â†’</a>
            </article>

  </section>

  <!-- Footer -->
  <footer id="main-footer" class="site-footer" aria-labelledby="footer-heading">
    <div class="footer-bg" aria-hidden="true"></div>
    <div class="footer-container">
      <div class="footer-logo">
        <h2 id="footer-heading" class="footer-brand">Snip Text</h2>
        <p>Empowering better writing, one tool at a time.</p>
      </div>
      <nav class="footer-links" aria-label="Footer links">
        <a href="/feedback.html">Feedback</a>
        <a href="contact.html#contact">Contact Us</a>
        <a href="/privacy-policy.html">Privacy Policy</a>
        <a href="/terms-of-use.html">Terms of Use</a>
      </nav>
      <div class="footer-bottom">
        <p>&copy; <span id="year"></span> <span class="powered-by">Snip Text - powered by <a href="https://checkai.pro" target="_blank" rel="noopener">CheckAI.pro</a></span> Â· All rights reserved.</p>
      </div>
    </div>
    <button class="to-top" id="to-top" aria-label="Back to top">
      <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
        <path d="M12 5l-6 6m6-6l6 6M12 5v14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </footer>

  <!-- Global JS includes (unchanged) -->
<script src="/js/index.js?v=reset1" defer></script>
  <script src="/js/auth.js?v=reset1"></script>
<script src="/tools/js/free-tools.js?v=reset1"></script>

<script>
/* ============================
   Typing Speed Test - logic
   Private, client-side only
   ============================ */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

/* Elements */
const els = {
  mode: $('#typing-mode'),
  duration: $('#typing-duration'),
  difficulty: $('#typing-difficulty'),
  punct: $('#typing-punct'),
  numbers: $('#typing-numbers'),
  blind: $('#typing-blind'),

  stage: $('#typing-stage'),
  text: $('#typing-text'),
  caret: $('#typing-caret'),
  capture: $('#typing-capture'),

  start: $('#typing-start'),
  restart: $('#typing-restart'),
  pause: $('#typing-pause'),

  wpm: $('#typing-wpm'),
  acc: $('#typing-acc'),
  cpm: $('#typing-cpm'),
  raWWPM: $('#typing-rawwpm'),
  errs: $('#typing-errors'),
  backs: $('#typing-backs'),
  correct: $('#typing-correct'),
  timer: $('#typing-timer'),
  graph: $('#typing-graph'),
  heatmap: $('#typing-heatmap'),

  copy: $('#typing-copy'),
  exportBtn: $('#typing-export'),
  share: $('#typing-share'),

  bests: $('#typing-bests')
};

/* Data pools */
const WORDS_BASE = ("lorem craft river night small early brave bright clean sharp tool text habit calm focus rhythm pixel swift modern soft cloud stone paper solid trust logic kind simple quiet vivid crisp blue amber ivory mint neon silver bold true").split(" ");
const WORDS_SPICY = ("quartz glyph jinx fjord blaze nymph zeal waltz clock razor vixen jumpy blitz lymph crwth phlox zigzag").split(" ");
const QUOTES = [
  "Clarity is kindness. Short sentences travel further.",
  "Perfect is the enemy of shipped. Iterate in public.",
  "What gets measured gets improved. Count the reps."
];
const CODE_SNIPS = [
  "function sum(a,b){return a+b}",
  "const id=crypto.randomUUID()",
  "for(let i=0;i<n;i++){out.push(arr[i])}"
];

/* State */
let state = {
  running:false, paused:false, startedAt:0, elapsed:0, // ms
  limitSec:60, idx:0,
  raw:[], // [{ch, ok, time}]
  text:"", spans:[],
  graph:[], // {t,w} per second
  errors:0, backs:0, correct:0,
  heat:{} // key -> {hits,miss}
};

const BESTS_KEY = 'typing_bests_v1';

/* Utils */
const clamp = (n,a,b)=>Math.max(a,Math.min(n,b));
function fmtTime(sec){
  const m = String(Math.floor(sec/60)).padStart(2,'0');
  const s = String(Math.floor(sec%60)).padStart(2,'0');
  return `${m}:${s}`;
}
function sampleWords(count, withPunct, withNums, spicy){
  const pool = [...WORDS_BASE, ...(spicy?WORDS_SPICY:[])];
  const out = [];
  for(let i=0;i<count;i++){
    let w = pool[(crypto.getRandomValues(new Uint32Array(1))[0]) % pool.length];
    if(withNums && Math.random()<0.15){ w += String(Math.floor(Math.random()*100)); }
    if(withPunct && Math.random()<0.12){ w += [".",",",";","?","!"][Math.floor(Math.random()*5)]; }
    out.push(w);
  }
  return out.join(" ");
}
function buildText(){
  const mode = els.mode.value;
  const withP = els.punct.checked;
  const withN = els.numbers.checked;
  const spicy = els.difficulty.value === 'spicy';
  if(mode==='quotes'){
    const q = QUOTES[(crypto.getRandomValues(new Uint32Array(1))[0]) % QUOTES.length];
    return q;
  } else if(mode==='code'){
    const c = CODE_SNIPS[(crypto.getRandomValues(new Uint32Array(1))[0]) % CODE_SNIPS.length];
    return c + (withP?";":'');
  }
  const baseCount = 55;
  return sampleWords(baseCount, withP, withN, spicy);
}
function renderText(str){
  els.text.innerHTML = '';
  state.spans = [];
  for(const ch of str){
    const sp = document.createElement('span');
    sp.textContent = ch;
    sp.className = 'pending';
    els.text.appendChild(sp);
    state.spans.push(sp);
  }
  positionCaret();
}
function positionCaret(){
  const i = state.idx;
  const target = state.spans[i] || state.spans[state.spans.length-1];
  if(!target) return;
  const rect = target.getBoundingClientRect();
  const parent = els.stage.getBoundingClientRect();
  els.caret.style.left = Math.max(8, rect.left - parent.left) + 'px';
  els.caret.style.top  = Math.max(14, rect.top - parent.top) + 'px';
}
function reset(all=true){
  state.running=false; state.paused=false; state.startedAt=0; state.elapsed=0;
  state.idx=0; state.raw=[]; state.errors=0; state.backs=0; state.correct=0; state.graph=[]; state.heat={};
  // duration
  const d = els.duration.value === 'custom' ? Number(prompt('Set duration in seconds (15-300):', '60')) : Number(els.duration.value);
  state.limitSec = clamp(isNaN(d)?60:d, 15, 300);
  els.timer.textContent = fmtTime(state.limitSec);
  // text
  state.text = buildText();
  renderText(state.text);
  updateStats();
  renderHeatmap();
  drawGraph();
}
function start(){
  if(state.running){ return; }
  state.running = true; state.paused = false;
  state.startedAt = performance.now() - state.elapsed;
  tick();
}
function pauseToggle(){
  if(!state.running) return;
  state.paused = !state.paused;
  if(!state.paused){
    state.startedAt = performance.now() - state.elapsed;
    tick();
  }
}
function endRun(){
  state.running=false;
  saveBest();
}
function tick(){
  if(!state.running || state.paused) return;
  state.elapsed = performance.now() - state.startedAt;
  const sec = Math.floor(state.elapsed/1000);
  const remain = Math.max(0, state.limitSec - sec);
  els.timer.textContent = fmtTime(remain);
  // push graph point once per second
  if(state.graph.length===0 || state.graph[state.graph.length-1].t !== sec){
    state.graph.push({t:sec, w:computeWPM(true)}); // corrected WPM
    drawGraph();
  }
  if(remain<=0){ endRun(); return; }
  requestAnimationFrame(tick);
}
function computeWPM(corrected=true){
  const minutes = Math.max(0.001, state.elapsed/60000);
  const chars = corrected ? state.correct : state.raw.length;
  const words = chars/5;
  return Math.round(words/minutes);
}
function computeCPM(){
  const minutes = Math.max(0.001, state.elapsed/60000);
  return Math.round(state.correct/minutes);
}
function updateStats(){
  const wpm = computeWPM(true);
  const rawwpm = computeWPM(false);
  const cpm = computeCPM();
  const acc = state.raw.length ? Math.max(0, Math.round(100 * state.correct / state.raw.length)) : 100;

  els.wpm.textContent = String(wpm);
  els.raWWPM.textContent = String(rawwpm);
  els.cpm.textContent = String(cpm);
  els.acc.textContent = acc + '%';
  els.errs.textContent = String(state.errors);
  els.backs.textContent = String(state.backs);
  els.correct.textContent = String(state.correct);
}
function drawGraph(){
  const cvs = els.graph;
  const ctx = cvs.getContext('2d');
  const w = cvs.clientWidth, h = cvs.clientHeight;
  if(cvs.width!==w || cvs.height!==h){ cvs.width=w; cvs.height=h; }
  ctx.clearRect(0,0,w,h);
  // axes baseline
  ctx.strokeStyle = '#203056';
  ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(32,h-24); ctx.lineTo(w-8,h-24); ctx.stroke();

  if(!state.graph.length) return;
  const maxW = Math.max(40, ...state.graph.map(p=>p.w));
  const maxT = Math.max(1, ...state.graph.map(p=>p.t));
  const px = t => 32 + (w-48) * (t/maxT);
  const py = val => (h-28) - (h-48) * (val/maxW);

  // line
  ctx.beginPath();
  ctx.lineWidth = 2;
  ctx.strokeStyle = '#3B82F6';
  state.graph.forEach((p,i)=>{
    const x = px(p.t), y = py(p.w);
    if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  });
  ctx.stroke();
}
function renderHeatmap(){
  els.heatmap.innerHTML = '';
  const keys = "1234567890qwertyuiopasdfghjkl;zxcvbnm,./-=[]'".split('');
  keys.forEach(k=>{
    const box = document.createElement('div');
    const st = state.heat[k] || {hits:0,miss:0};
    const rate = st.hits ? (st.miss/(st.hits+st.miss)) : 0;
    box.className = 'typing-key' + (rate>0.2?' bad': rate>0.1?' warn':'');
    box.textContent = k;
    box.title = `Misses: ${st.miss} / Hits: ${st.hits}`;
    els.heatmap.appendChild(box);
  });
}

/* Input handling */
function onKey(e){
  if(e.key === 'Tab'){ e.preventDefault(); reset(); return; }
  if(!state.running && e.key.length===1){ start(); }
  if(!state.running || state.paused) return;

  const expected = state.text[state.idx] || '';
  let pressed = e.key;

  // normalize key
  if(pressed === 'Enter') pressed = '\n';

  if(e.key === 'Backspace'){
    e.preventDefault();
    if(state.idx>0){
      state.idx--; state.backs++;
      const sp = state.spans[state.idx];
      sp.className = 'pending';
      positionCaret();
      updateStats();
    }
    return;
  }

  // Only count visible characters
  if(pressed.length !== 1) return;

  const ok = pressed === expected;
  const sp = state.spans[state.idx];
  if(!sp) return;

  state.raw.push({ch:pressed, ok, time: performance.now()});

  if(ok){
    sp.className = els.blind.checked ? 'pending' : 'correct';
    state.correct++;
    state.heat[pressed] = state.heat[pressed] || {hits:0,miss:0}; state.heat[pressed].hits++;
    state.idx++;
  }else{
    sp.className = els.blind.checked ? 'pending' : 'wrong';
    state.errors++;
    state.heat[pressed] = state.heat[pressed] || {hits:0,miss:0}; state.heat[pressed].miss++;
    state.idx++; // advance to keep pace
  }
  positionCaret();
  updateStats();

  // Loop when hitting end so test remains full
  if(state.idx >= state.spans.length){
    // extend with more words
    state.text += ' ' + sampleWords(20, els.punct.checked, els.numbers.checked, els.difficulty.value==='spicy');
    renderText(state.text);
    // move caret to new idx
    for(let i=0;i<state.idx;i++){
      if(state.spans[i]) state.spans[i].className = 'correct';
    }
    positionCaret();
  }
}

/* Results */
function saveBest(){
  const record = {
    ts: new Date().toISOString(),
    mode: els.mode.value,
    duration: state.limitSec,
    wpm: computeWPM(true),
    rawwpm: computeWPM(false),
    cpm: computeCPM(),
    acc: state.raw.length ? Math.round(100 * state.correct / state.raw.length) : 100,
    errors: state.errors
  };
  const bests = JSON.parse(localStorage.getItem(BESTS_KEY)||'[]');
  bests.unshift(record);
  localStorage.setItem(BESTS_KEY, JSON.stringify(bests.slice(0,15)));
  renderBests();
}
function renderBests(){
  const bests = JSON.parse(localStorage.getItem(BESTS_KEY)||'[]');
  if(!bests.length){ els.bests.textContent = 'No runs yet. Your best scores will appear here.'; return; }
  const top = [...bests].sort((a,b)=>b.wpm-a.wpm).slice(0,5);
  els.bests.innerHTML = top.map(b => `<div>WPM <strong>${b.wpm}</strong> â€¢ ${b.acc}% â€¢ ${b.duration}s â€¢ ${b.mode} â€¢ <span class="typing-help">${new Date(b.ts).toLocaleString()}</span></div>`).join('');
}

/* Export & share */
function download(name, data, mime='application/json'){
  const blob = new Blob([data], {type: mime+';charset=utf-8'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob); a.download = name;
  document.body.appendChild(a); a.click();
  setTimeout(()=>{ URL.revokeObjectURL(a.href); a.remove(); }, 0);
}

/* Wiring */
function init(){
  // prepare heatmap grid
  renderHeatmap();
  // render initial text and graph
  reset();

  // focus capture on click to support mobile
  els.stage.addEventListener('click', ()=> els.capture.focus());
  window.addEventListener('resize', positionCaret);

  // controls
  els.start.addEventListener('click', ()=> start());
  els.restart.addEventListener('click', ()=> reset());
  els.pause.addEventListener('click', ()=> { pauseToggle(); els.pause.textContent = state.paused ? 'Resume' : 'Pause'; });
  els.mode.addEventListener('change', ()=> reset());
  els.duration.addEventListener('change', ()=> reset());
  els.difficulty.addEventListener('change', ()=> reset());
  els.punct.addEventListener('change', ()=> reset(false));
  els.numbers.addEventListener('change', ()=> reset(false));
  els.blind.addEventListener('change', ()=> { /* no rebuild needed */ });

  // typing
  document.addEventListener('keydown', onKey);

  // actions
  els.copy.addEventListener('click', async ()=>{
    const payload = {
      wpm: computeWPM(true),
      rawwpm: computeWPM(false),
      cpm: computeCPM(),
      acc: state.raw.length ? Math.round(100 * state.correct / state.raw.length) : 100,
      errors: state.errors,
      duration: state.limitSec,
      mode: els.mode.value
    };
    await navigator.clipboard.writeText(`Typing Speed Test - WPM: ${payload.wpm}, Accuracy: ${payload.acc}%, CPM: ${payload.cpm}, Duration: ${payload.duration}s, Mode: ${payload.mode}`);
    els.copy.textContent = 'Copied'; setTimeout(()=> els.copy.textContent='Copy results', 900);
  });

  els.exportBtn.addEventListener('click', ()=>{
    const out = {
      timestamp: new Date().toISOString(),
      mode: els.mode.value,
      duration: state.limitSec,
      correctedWPM: computeWPM(true),
      rawWPM: computeWPM(false),
      cpm: computeCPM(),
      accuracy: state.raw.length ? Math.round(100 * state.correct / state.raw.length) : 100,
      errors: state.errors,
      backs: state.backs,
      heat: state.heat,
      series: state.graph
    };
    download('typing-speed-result.json', JSON.stringify(out, null, 2));
  });

  els.share.addEventListener('click', async ()=>{
    const title = 'Typing Speed Test - SnipText';
    const text = `I just scored ${computeWPM(true)} WPM at ${Math.round(state.raw.length ? 100*state.correct/state.raw.length : 100)}% accuracy. Try it:`;
    const url = location.href;
    if(navigator.share){
      try{ await navigator.share({title, text, url}); }catch{}
    }else{
      await navigator.clipboard.writeText(`${title}\n${text}\n${url}`);
      els.share.textContent = 'Copied link'; setTimeout(()=> els.share.textContent='Share', 1000);
    }
  });

  renderBests();
}
init();
</script>

</body>
</html>

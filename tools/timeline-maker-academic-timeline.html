<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GE98V48RK8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GE98V48RK8');
</script>

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "t5y2d08vd0");
</script>
  <meta name="msvalidate.01" content="A9EB890789B5C28E62629F99EEDC30A1" />
  <!-- Essentials -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Primary SEO -->
  <title>Timeline Maker - Enter Events to Auto-Generate Academic Timeline | SnipText</title>
  <meta name="description" content="Type or paste events and instantly generate an academic-style timeline. Supports CSV import, multi-format dates, categories, color bands, zoom, reorder, and one-click export (HTML/SVG/JSON). Private, in-browser." />
  <meta name="author" content="Muhammad Waris" />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="timeline-maker-academic-timeline" />
  <link rel="alternate" href="timeline-maker-academic-timeline" hreflang="en" />
  <link rel="alternate" href="timeline-maker-academic-timeline" hreflang="x-default" />

  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css?v=reset1" />
  <link rel="stylesheet" href="/tools/css/free-tools.css?v=reset1" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="SnipText" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="Timeline Maker - Academic-Style Timelines" />
  <meta property="og:description" content="Enter events and auto-generate an academic timeline with sorting, categories, zoom, eras, and export. Runs locally in your browser." />
  <meta property="og:url" content="timeline-maker-academic-timeline" />
  <!-- default open graph image path remains the same -->
  <meta property="og:image" content="https://checkai.pro/images/sniptext-blog-default-image.png" />
  <meta property="og:image:secure_url" content="https://checkai.pro/images/sniptext-blog-default-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="SnipText Timeline Maker creating an academic timeline" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Timeline Maker - Academic-Style Timelines" />
  <meta name="twitter:description" content="Paste events â†’ clean academic timeline with categories, eras, zoom, and export to HTML/SVG/JSON." />
  <meta name="twitter:image" content="https://checkai.pro/images/sniptext-blog-default-image.png" />

  <!-- Theme / Icons -->
  <meta name="theme-color" content="#1D4ED8" />
  <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" />
  <link rel="icon" href="/favicon.png" type="image/png" />

  <!-- Fonts & Global CSS (keep included files the same) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />

  <!-- Page style (dark, branded, animated). All names use timeline-maker* -->
  <style>
:root{
  /* Brand mapping (already provided in your project) */
  --timeline-maker-primary:   var(--color-primary);
  --timeline-maker-accent:    var(--color-accent);

  /* Surfaces & text */
  --timeline-maker-surface:    var(--color-footer-bg);
  --timeline-maker-surface-2:  var(--color-bg-dark);
  --timeline-maker-text:       var(--color-white);
  --timeline-maker-muted:      var(--color-text-light);
  --timeline-maker-border:     rgba(255,255,255,.10);
  --timeline-maker-highlight:  var(--color-used-often);
  --timeline-maker-bg-dark:    var(--color-bg-dark);

  /* Gradients & glow */
  --timeline-maker-grad-cta: linear-gradient(135deg,
    var(--gradient-cta-start) 0%,
    var(--color-accent) 42%,
    var(--gradient-cta-end) 100%);

  --timeline-maker-aurora:
    radial-gradient(1200px 600px at 12% -10%,
      color-mix(in oklab, var(--color-accent) 18%, transparent), transparent 60%),
    radial-gradient(900px 520px at 110% 0%,
      color-mix(in oklab, var(--color-primary) 16%, transparent), transparent 60%),
    radial-gradient(700px 520px at 50% 115%,
      color-mix(in oklab, var(--gradient-cta-end) 12%, transparent), transparent 60%);

  /* Rounding, shadow, motion */
  --timeline-maker-radius-lg: 20px;
  --timeline-maker-radius:    14px;
  --timeline-maker-shadow-xl: 0 25px 50px -12px rgba(0,0,0,.55);
  --timeline-maker-shadow-md: 0 12px 30px rgba(0,0,0,.35);
  --timeline-maker-ease: cubic-bezier(.22,.61,.36,1);
  --timeline-maker-dur: 240ms;
}

/* Page shell + aurora */
*{box-sizing:border-box}
html,body{min-height:100%;height:100%;margin:0}
.timeline-maker-page,
.timeline-maker-container{
  color: var(--timeline-maker-text);
  font-family: var(--font-body, 'Roboto', ui-sans-serif, system-ui, -apple-system, Arial, sans-serif);
}
.timeline-maker-page{
  background: var(--timeline-maker-bg-dark);
  background-image: var(--timeline-maker-aurora);
  background-attachment: fixed, fixed, fixed;
}

/* Wrapper */
.timeline-maker-container{
  width:min(1120px, 94vw);
  margin: clamp(12px,2vw,24px) auto 80px;
  padding: 0 clamp(12px,2vw,18px);
}

/* -----------------------------
   HERO (glassy header panel)
------------------------------ */
.timeline-maker-hero{
  position:relative; isolation:isolate;
  padding: clamp(24px,3.5vw,34px);
  border:1px solid var(--timeline-maker-border);
  border-radius: var(--timeline-maker-radius-lg);
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.025));
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  box-shadow: var(--timeline-maker-shadow-xl);
  overflow:hidden;
}
.timeline-maker-hero::after{
  content:""; position:absolute; inset:-1px; pointer-events:none; opacity:.85;
  background:
    radial-gradient(900px 180px at 50% -120px, rgba(255,255,255,.08), transparent 60%);
}

.timeline-maker-badge{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:999px;
  border:1px solid var(--timeline-maker-border);
  background: #0F172A; color: var(--timeline-maker-muted);
  font: 600 12px/1 var(--font-body, 'Roboto', sans-serif);
  margin-bottom: 4px;
}
.timeline-maker-badge .timeline-maker-dot{
  width:8px; height:8px; border-radius:999px;
  background: var(--timeline-maker-accent);
}

.timeline-maker-title{
  margin:6px 0 8px;
  font-family: var(--font-heading, 'Poppins', 'Segoe UI', sans-serif);
  font-weight:800; letter-spacing:.2px;
  font-size: clamp(28px, 3.4vw, 44px); line-height:1.15;
  background: linear-gradient(90deg,#fff,
    color-mix(in oklab, var(--color-accent) 60%, #fff) 45%,
    color-mix(in oklab, var(--gradient-cta-end) 48%, #fff) 85%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.timeline-maker-subtitle{
  color: var(--timeline-maker-muted);
  margin: 0 0 14px; max-width: 78ch;
  font-size: clamp(14px,1.8vw,16px);
}

/* Primary actions */
.timeline-maker-actions{
  display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;
}
.timeline-maker-btn{
  appearance:none; cursor:pointer; user-select:none;
  display:inline-flex; align-items:center; gap:10px;
  padding: 12px 16px; border-radius: 14px;
  border:1px solid var(--timeline-maker-border);
  background: var(--timeline-maker-surface);
  color: var(--timeline-maker-text); font-weight:700;
  transition: transform 140ms var(--timeline-maker-ease),
             box-shadow var(--timeline-maker-dur) var(--timeline-maker-ease),
             background var(--timeline-maker-dur) var(--timeline-maker-ease),
             border-color var(--timeline-maker-dur) var(--timeline-maker-ease),
             opacity 120ms ease;
  box-shadow: var(--timeline-maker-shadow-md);
}
.timeline-maker-btn:hover{ transform: translateY(-1px) }
.timeline-maker-btn:active{ transform: translateY(0) }
.timeline-maker-btn:disabled{ opacity:.6; cursor:not-allowed }
.timeline-maker-primary{
  background: var(--timeline-maker-grad-cta);
  color:#0b0f2c; border-color:transparent;
  box-shadow: 0 12px 28px rgba(59,130,246,.28);
}
.timeline-maker-hidden{ display:none !important; }

/* -----------------------------
   Feature grid (Input / Preview controls)
------------------------------ */
.timeline-maker-grid{
  display:grid; grid-template-columns: 1.1fr .9fr; gap:18px;
  margin-top: 18px;
}
@media (max-width:980px){ .timeline-maker-grid{ grid-template-columns:1fr } }

.timeline-maker-card{
  background: linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.02));
  border:1px solid var(--timeline-maker-border);
  border-radius: var(--timeline-maker-radius-lg);
  box-shadow: var(--timeline-maker-shadow-md);
  overflow:hidden;
}
.timeline-maker-card>header{
  padding: 14px 16px;
  border-bottom: 1px dashed var(--timeline-maker-border);
  background: linear-gradient(180deg, color-mix(in oklab, var(--color-accent) 12%, transparent), transparent);
}
.timeline-maker-card>header h2{
  margin:0; font: 700 13px/1 var(--font-body);
  letter-spacing:.14em; text-transform:uppercase; color: var(--timeline-maker-muted);
}
.timeline-maker-card .timeline-maker-body{ padding: 14px }

/* -----------------------------
   Inputs / selects / textarea
------------------------------ */
.timeline-maker-field{ display:grid; gap:6px; margin-bottom:12px }
.timeline-maker-label{ font: 700 13px/1 var(--font-body); color: var(--timeline-maker-text) }

.timeline-maker-input,
.timeline-maker-select,
.timeline-maker-textarea{
  width:100%; border:1px solid var(--timeline-maker-border);
  border-radius: 12px; padding: 10px 12px;
  background: #0b1224; color: var(--timeline-maker-text);
  outline:none; font-family: var(--font-body);
  transition: border-color var(--timeline-maker-dur) var(--timeline-maker-ease),
             box-shadow var(--timeline-maker-dur) var(--timeline-maker-ease),
             transform 120ms ease, background var(--timeline-maker-dur) var(--timeline-maker-ease);
}
.timeline-maker-input:focus,
.timeline-maker-select:focus,
.timeline-maker-textarea:focus{
  border-color: var(--timeline-maker-accent);
  box-shadow: 0 0 0 4px rgba(59,130,246,.16);
  transform: translateY(-1px);
}
.timeline-maker-input::placeholder,
.timeline-maker-textarea::placeholder{ color:#7c87a3 }

.timeline-maker-textarea{
  min-height: 180px; resize: vertical;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, 'Roboto Mono', monospace;
  font-size:13px; line-height:1.6;
  background-image:
    linear-gradient(transparent 23px, rgba(255,255,255,.05) 24px),
    linear-gradient(transparent 23px, rgba(255,255,255,.05) 24px);
  background-size:100% 24px; background-repeat:repeat;
}

.timeline-maker-row{ display:grid; gap:10px; grid-template-columns: repeat(2,1fr) }
@media (max-width:700px){ .timeline-maker-row{ grid-template-columns:1fr } }

.timeline-maker-switch{
  display:inline-flex; align-items:center; gap:10px;
  padding:8px 10px; border-radius:999px;
  border:1px dashed var(--timeline-maker-border);
  background:#0b1224; color: var(--timeline-maker-text);
}
.timeline-maker-switch input{ accent-color: var(--timeline-maker-accent) }

/* Range (zoom) */
input[type="range"]#timeline-maker-zoom{
  appearance:none; height:8px; border-radius:999px;
  background: linear-gradient(90deg, rgba(59,130,246,.35), rgba(124,58,237,.35));
  outline:none;
}
input[type="range"]#timeline-maker-zoom::-webkit-slider-thumb{
  appearance:none; width:18px; height:18px; border-radius:50%;
  background:#fff; border:2px solid var(--timeline-maker-accent);
  box-shadow:0 2px 10px rgba(0,0,0,.35);
}
input[type="range"]#timeline-maker-zoom::-moz-range-thumb{
  width:18px; height:18px; border-radius:50%;
  background:#fff; border:2px solid var(--timeline-maker-accent);
  box-shadow:0 2px 10px rgba(0,0,0,.35);
}

/* Toolbar chips */
.timeline-maker-toolbar{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px; margin-bottom:10px;
}
.timeline-maker-pill{
  padding:8px 12px; border-radius:999px; font-weight:700;
  border:1px solid var(--timeline-maker-border);
  background:#0f172a; color: var(--timeline-maker-text);
  cursor:pointer;
  transition: border-color var(--timeline-maker-dur) var(--timeline-maker-ease),
             background var(--timeline-maker-dur) var(--timeline-maker-ease),
             transform 120ms ease;
}
.timeline-maker-pill:hover{ background:#16213a; transform: translateY(-1px) }
.timeline-maker-pill[aria-pressed="true"]{
  border-color: var(--timeline-maker-accent);
  box-shadow: 0 0 0 3px rgba(59,130,246,.18);
}

/* -----------------------------
   Preview
------------------------------ */
.timeline-maker-preview-wrap{
  position:relative;
  border:1px solid var(--timeline-maker-border);
  border-radius: var(--timeline-maker-radius);
  overflow:auto; max-height: 560px;
  background:#0b1224;
}
.timeline-maker-preview{
  position:relative; width:min(940px,100%); margin:22px auto;
  padding: 30px 26px 50px;
}

/* Axis & items */
.timeline-maker-axis{
  position:absolute; left:48px; top:0; bottom:0; width:2px;
  background: linear-gradient(180deg, rgba(59,130,246,.55), rgba(124,58,237,.55));
}
.timeline-maker-item{
  position:relative;
  display:grid; grid-template-columns: 120px 1fr; gap:16px;
  margin: 0 0 22px; opacity:0; transform: translateY(8px);
  animation: timeline-maker-fade .35s ease forwards;
}
.timeline-maker-time{ color:#cbd5e1; white-space:nowrap }

.timeline-maker-dot{
  position:absolute; left:41px; top:10px;
  width:14px; height:14px; border-radius:50%;
  background: var(--timeline-maker-accent);
  box-shadow: 0 0 0 4px rgba(59,130,246,.18);
}

.timeline-maker-cardline{
  background: rgba(255,255,255,.02);
  border:1px solid var(--timeline-maker-border);
  border-radius: 12px; padding: 12px 14px;
}
.timeline-maker-title2{ font-weight:800; letter-spacing:.2px }
.timeline-maker-desc{ color: var(--timeline-maker-muted); margin-top:6px }
.timeline-maker-meta{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px }
.timeline-maker-tag{
  padding:6px 10px; border-radius:999px; font-weight:700;
  border:1px solid var(--timeline-maker-border);
  background:#0f172a;
}

/* Era band */
.timeline-maker-era{
  position:relative; margin:18px 0; padding:6px 12px;
  border-left:4px solid var(--timeline-maker-highlight);
  color:#ffd9c9;
  background: linear-gradient(90deg, rgba(232,93,39,.12), transparent);
  border-radius:8px;
}

/* -----------------------------
   Code output panel
------------------------------ */
.timeline-maker-codebox{
  position:relative; overflow:hidden;
  background:#0b1224; color:#e2e8f0;
  border:1px solid var(--timeline-maker-border);
  border-radius: var(--timeline-maker-radius);
  font: 12px/1.6 ui-monospace, SFMono-Regular, Menlo, Consolas, 'Roboto Mono', monospace;
}
.timeline-maker-codebox header{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; background:#1e293b;
  border-bottom:1px solid var(--timeline-maker-border);
}
.timeline-maker-codebox pre{ margin:0; padding:12px; white-space:pre; overflow:auto }

/* -----------------------------
   Micro-motion & a11y
------------------------------ */
@keyframes timeline-maker-fade{ from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
.timeline-maker-animate-in{ animation: timeline-maker-fade .35s ease both }

:where(.timeline-maker-btn,.timeline-maker-pill,.timeline-maker-input,
       .timeline-maker-select,.timeline-maker-textarea){
  outline:none;
}
:where(.timeline-maker-btn,.timeline-maker-pill,.timeline-maker-input,
       .timeline-maker-select,.timeline-maker-textarea):focus-visible{
  outline:2px solid color-mix(in oklab, var(--timeline-maker-accent) 60%, white);
  outline-offset:2px;
}

/* Utility */
.timeline-maker-muted{ color: var(--timeline-maker-muted) }
.timeline-maker-right{ text-align:right }

/* Print-friendly */
@media print{
  .timeline-maker-actions,.timeline-maker-grid,.timeline-maker-codebox,nav,#main-footer{ display:none !important }
  .timeline-maker-axis{ left:32px }
  .timeline-maker-preview{ padding:0 }
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce){
  .timeline-maker-animate-in{ animation:none !important }
  .timeline-maker-btn,.timeline-maker-input,.timeline-maker-select,.timeline-maker-textarea,.timeline-maker-pill{ transition:none !important }
}

.feature-card-all-pages {margin: 0 2rem;}
.tools-grid {margin: 1rem; background: #0e1730;}
.tool-card {background: #0f1b34;}
@media (max-width: 600px) { .tools-grid {margin: 1rem 0;} }
  </style>

  <!-- Structured Data: Organization + WebSite -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"SnipText",
    "url":"https://checkai.pro/",
    "logo":"https://checkai.pro/favicon.png",
    "sameAs":["https://www.linkedin.com","https://twitter.com"]
  }
  </script>

  <!-- Structured Data: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"SnipText Timeline Maker",
    "applicationCategory":"ProductivityApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "url":"timeline-maker-academic-timeline",
    "featureList":[
      "CSV import and multi-format date parsing",
      "Drag reorder and automatic sorting",
      "Categories, color tags, and era bands",
      "Zoom scale and compact mode",
      "One-click export to HTML, SVG, and JSON",
      "Private, client-side operation"
    ],
    "author":{"@type":"Organization","name":"SnipText"}
  }
  </script>

  <!-- Structured Data: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Is the Timeline Maker free and private?","acceptedAnswer":{"@type":"Answer","text":"Yes. It runs in your browser and is free for normal use. No sign in required."}},
      {"@type":"Question","name":"What date formats are supported?","acceptedAnswer":{"@type":"Answer","text":"YYYY, YYYY-MM, YYYY-MM-DD, DD/MM/YYYY, and natural text like 'Jan 2020' are parsed. Ranges such as '2018-01-01..2019-06-30' create spans."}},
      {"@type":"Question","name":"Can I import CSV or paste from Sheets?","acceptedAnswer":{"@type":"Answer","text":"Yes. Use CSV upload or paste. Columns supported: date, title, description, category, color, and optional end date for ranges."}},
      {"@type":"Question","name":"How do I export my timeline?","acceptedAnswer":{"@type":"Answer","text":"Use Export HTML, Export SVG, or Export JSON. You can also copy the HTML markup for your site."}}
    ]
  }
  </script>
</head>
<body class="timeline-maker-page">

  <!-- Simple nav (keep your global navbar/footer styles unchanged if you include them) -->
  <nav id="main-navbar">
    <div class="nav-container">
      <div class="logo"><a href="/index.html">Snip Text</a></div>
      <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
      <ul class="nav-links" id="nav-links">
        <li><a href="/index.html">Home</a></li>
        <li><a href="/tools/free-tools.html">Free Tools</a></li>
        <li><a href="features.html">Features</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="/blog/blog.html">Blog</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a id="nav-dashboard-link" href="login.html">Dashboard</a></li>
        <li><a id="nav-logout-link" href="#" style="display:none;">Logout</a></li>
      </ul>
    </div>
  </nav>

  <main class="timeline-maker-container" id="home">
    <section class="timeline-maker-hero timeline-maker-animate-in">
      <span class="timeline-maker-badge" aria-hidden="true"><span class="timeline-maker-dot"></span> Tools Â· Timeline</span>
      <h1 class="timeline-maker-title">Timeline Maker</h1>
      <p class="timeline-maker-subtitle">Enter events and generate an academic-style timeline. Import CSV, parse dates, add categories and eras, zoom the scale, drag to reorder, and export to HTML, SVG, or JSON. Everything runs locally in your browser.</p>

      <div class="timeline-maker-actions" role="group" aria-label="Primary actions">
        <button class="timeline-maker-btn timeline-maker-primary" id="timeline-maker-generate">Generate timeline</button>
        <button class="timeline-maker-btn" id="timeline-maker-sample">Insert sample events</button>
        <label class="timeline-maker-btn" for="timeline-maker-file">
          <input id="timeline-maker-file" type="file" accept=".csv,text/csv,text/plain" class="timeline-maker-hidden" /> Upload CSV
        </label>
      </div>

      <div class="timeline-maker-grid" id="timeline-maker-features">
        <!-- Left: Input and options -->
        <article class="timeline-maker-card timeline-maker-animate-in" style="animation-delay:.05s">
          <header><h2>Events input</h2></header>
          <div class="timeline-maker-body">
            <div class="timeline-maker-field">
              <label for="timeline-maker-input" class="timeline-maker-label">Type or paste events</label>
              <textarea id="timeline-maker-input" class="timeline-maker-textarea" placeholder="YYYY-MM-DD | Title | Description | Category | #color
2020-01-15 | Research proposal submitted | Initial submission for grant cycle A | Research | #3B82F6
2020-06-30..2021-02-15 | Field study (Phase I) | Data collection in three regions | Study | #7c3aed
2021 | Publication accepted | Journal of Example Studies | Publishing | #e85d27"></textarea>
              <small class="timeline-maker-muted">Formats: <em>YYYY</em>, <em>YYYY-MM</em>, <em>YYYY-MM-DD</em>, <em>DD/MM/YYYY</em>, <em>Jan 2020</em>, and ranges like <em>2019..2021-06</em>. Columns are separated by <strong>|</strong> by default.</small>
            </div>

            <div class="timeline-maker-row">
              <div class="timeline-maker-field">
                <label for="timeline-maker-delim" class="timeline-maker-label">Delimiter</label>
                <select id="timeline-maker-delim" class="timeline-maker-select">
                  <option value="|">Pipe |</option>
                  <option value=",">Comma ,</option>
                  <option value="tab">Tab</option>
                  <option value=";">Semicolon ;</option>
                </select>
              </div>
              <div class="timeline-maker-field">
                <label for="timeline-maker-caption" class="timeline-maker-label">Timeline title (optional)</label>
                <input id="timeline-maker-caption" class="timeline-maker-input" placeholder="Project Alpha - Key Milestones" />
              </div>
            </div>

            <div class="timeline-maker-row">
              <div class="timeline-maker-switch"><input type="checkbox" id="timeline-maker-auto-sort" checked /> <label for="timeline-maker-auto-sort">Auto sort by date</label></div>
              <div class="timeline-maker-switch"><input type="checkbox" id="timeline-maker-compact" /> <label for="timeline-maker-compact">Compact spacing</label></div>
            </div>

            <div class="timeline-maker-row">
              <div class="timeline-maker-field">
                <label for="timeline-maker-era" class="timeline-maker-label">Add era band (start..end | label)</label>
                <input id="timeline-maker-era" class="timeline-maker-input" placeholder="2019-01..2020-12 | Pilot Program" />
              </div>
              <div class="timeline-maker-field">
                <label for="timeline-maker-zoom" class="timeline-maker-label">Zoom</label>
                <input id="timeline-maker-zoom" type="range" min="80" max="140" value="100" class="timeline-maker-input" />
              </div>
            </div>
          </div>
        </article>

        <!-- Right: Preview controls -->
        <aside class="timeline-maker-card timeline-maker-animate-in" style="animation-delay:.1s">
          <header><h2>Preview controls</h2></header>
          <div class="timeline-maker-body">
            <div class="timeline-maker-toolbar" role="group" aria-label="Preview toolbar">
              <button class="timeline-maker-pill" id="timeline-maker-clear" title="Clear input">Clear</button>
              <button class="timeline-maker-pill" id="timeline-maker-copy-html" title="Copy HTML">Export HTML</button>
              <button class="timeline-maker-pill" id="timeline-maker-export-svg" title="Export SVG">Export SVG</button>
              <button class="timeline-maker-pill" id="timeline-maker-export-json" title="Export JSON">Export JSON</button>
              <button class="timeline-maker-pill" id="timeline-maker-print" title="Print">Print</button>
            </div>
            <div class="timeline-maker-field">
              <label for="timeline-maker-filter" class="timeline-maker-label">Quick filter</label>
              <input id="timeline-maker-filter" class="timeline-maker-input" placeholder="Filter by title, description, or category" />
            </div>
            <div class="timeline-maker-field">
              <label for="timeline-maker-cat" class="timeline-maker-label">Category view</label>
              <input id="timeline-maker-cat" class="timeline-maker-input" placeholder="Show only categoryâ€¦ e.g., Research" />
            </div>
          </div>
        </aside>
      </div>

      <!-- Live preview -->
      <article class="timeline-maker-card timeline-maker-animate-in" style="margin-top:18px;animation-delay:.15s">
        <header><h2>Preview</h2></header>
        <div class="timeline-maker-body">
          <div id="timeline-maker-preview-wrap" class="timeline-maker-preview-wrap" tabindex="0" aria-live="polite" aria-label="Timeline preview">
            <div id="timeline-maker-preview" class="timeline-maker-preview">
              <!-- axis + items injected here -->
              <div class="timeline-maker-axis" aria-hidden="true"></div>
              <div id="timeline-maker-caption-el" class="timeline-maker-era timeline-maker-hidden"></div>
              <div id="timeline-maker-items" role="list"></div>
            </div>
          </div>
        </div>
      </article>

      <!-- Code output -->
      <article class="timeline-maker-card timeline-maker-animate-in" style="margin-top:18px;animation-delay:.2s">
        <header><h2>Generated HTML</h2></header>
        <div class="timeline-maker-body">
          <div class="timeline-maker-codebox" id="timeline-maker-codebox">
            <header>
              <strong>html</strong>
              <div class="timeline-maker-actions">
                <button class="timeline-maker-btn" id="timeline-maker-copy2">Copy</button>
              </div>
            </header>
            <pre id="timeline-maker-code" tabindex="0">&lt;!-- Click Generate to create the timeline HTML --&gt;</pre>
          </div>
        </div>
      </article>
    </section>


      <div class="free-tools-guide">
    <p class="free-tools-guide-p">See Timeline Maker Guide on SnipText Blog Page <a href="/blog/timeline-maker-create-academic-timelines-project-roadmaps-history-classroom-sniptext-blog.html" class="free-tools-blog-link">here</a>.</p>
  </div>

  </main>



<!-- TOOLS GRID -->
       <div class="feature-card-all-pages">
        <h1 class="feature-card-all-pages-para">Featured Tools</h1>
       </div>
  <section id="tools-grid" class="tools-grid" aria-label="Tools list">
    <!-- Tool cards - 10 items -->

    <article class="tool-card grade-calc-tool-card" tabindex="0" data-href="/tools/grade-calculator-percentage-letter-weighted-average-gpa-sniptext.html" aria-labelledby="gc-tg" data-filter="Academic & Planning">
          <div class="card-icon grade-calc-card-icon" aria-hidden="true">
            <!-- Grade icon: graduation cap + gauge -->
            <svg viewBox="0 0 24 24" class="svg-icon grade-calc-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Grade Calculator">
              <!-- mortarboard -->
              <path d="M3 8l9-4 9 4-9 4-9-4z" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
              <path d="M7 10v3.5c0 .8 2.7 1.8 5 1.8s5-1 5-1.8V10" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <!-- tassel -->
              <path d="M18 9.5v4.5m0 0a1.5 1.5 0 1 0 0 3" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <!-- gauge ring -->
              <path d="M12 20a6 6 0 1 0-6-6" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" opacity=".9"/>
              <path d="M12 14l2.8-2" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
            </svg>
          </div>
          <h3 id="gc-tg" class="card-title grade-calc-card-title">Grade Calculator</h3>
          <p class="card-desc grade-calc-card-desc">
            Convert percentages to letter grades and compute weighted averages across categories. Drop lowest scores, run what-if finals, calculate the required score to hit a target, and estimate GPA. Import/Export CSV or JSON. Private, in-browser.
          </p>
          <a class="card-cta grade-calc-card-cta" href="/tools/grade-calculator-percentage-letter-weighted-average-gpa-sniptext.html" aria-label="Open Grade Calculator">Open â†’</a>
        </article>

    <article class="tool-card table-gen-tool-card" tabindex="0" data-href="/tools/quick-table-generator-csv-to-html-table-code.html" aria-labelledby="table-gen-tg" data-filter="Academic & Planning">
        <div class="card-icon table-gen-card-icon" aria-hidden="true">
          <!-- Grid/Table icon -->
          <svg viewBox="0 0 24 24" class="svg-icon table-gen-svg" xmlns="http://www.w3.org/2000/svg" role="img">
            <rect x="3" y="4" width="18" height="16" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="1.4"/>
            <path d="M3 9h18M3 14h18M8 4v16M14 4v16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 id="table-gen-tg" class="card-title table-gen-card-title">Quick Table Generator</h3>
        <p class="card-desc table-gen-card-desc">
          Paste or upload CSV to generate clean, responsive HTML table code with auto-detect delimiter, header toggle, sort, filter, paginate, transpose, sticky header, and one-click copy or download. Private, in-browser.
        </p>
        <a class="card-cta table-gen-card-cta" href="/tools/quick-table-generator-csv-to-html-table-code.html" aria-label="Open Quick Table Generator">Open â†’</a>
      </article>

    <article class="tool-card agecalc-tool-card" tabindex="0" data-href="/tools/age-birthday-calculator-sniptext.html" aria-labelledby="agecalc-tg" data-filter="Fun & Interactive">
  <div class="card-icon agecalc-card-icon" aria-hidden="true">
    <!-- Age Calculator icon: calendar + countdown ring -->
    <svg viewBox="0 0 24 24" class="svg-icon agecalc-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Age & Birthday Calculator">
      <!-- Outer countdown ring -->
      <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="1.2" opacity="0.25"/>
      <!-- Progress arc (static accent wedge) -->
      <path d="M12 2 a10 10 0 0 1 8.7 5.02" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.9"/>
      <!-- Calendar body -->
      <rect x="5" y="7.2" width="14" height="10.8" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="1.2" opacity="0.85"/>
      <!-- Calendar header bar -->
      <rect x="5" y="7.2" width="14" height="3" rx="1" ry="1" fill="currentColor" opacity="0.3"/>
      <!-- Binding rings -->
      <g fill="currentColor" opacity="0.95">
        <rect x="7" y="5" width="1.6" height="2.6" rx="0.6"/>
        <rect x="11.2" y="5" width="1.6" height="2.6" rx="0.6"/>
        <rect x="15.4" y="5" width="1.6" height="2.6" rx="0.6"/>
      </g>
      <!-- Date dots -->
      <g fill="currentColor" opacity="0.85">
        <circle cx="8.4" cy="12" r="0.8"/>
        <circle cx="12" cy="12" r="0.8"/>
        <circle cx="15.6" cy="12" r="0.8"/>
        <circle cx="8.4" cy="15" r="0.8"/>
        <circle cx="12" cy="15" r="0.8"/>
        <circle cx="15.6" cy="15" r="0.8"/>
      </g>
      <!-- Small clock overlay -->
      <g transform="translate(16.6,15.4)">
        <circle cx="0" cy="0" r="2.8" fill="none" stroke="currentColor" stroke-width="1" opacity="0.9"/>
        <path d="M0 0 v-1.4 M0 0 h1.2" stroke="currentColor" stroke-width="1" stroke-linecap="round" opacity="0.9"/>
      </g>
    </svg>
  </div>
  <h3 id="agecalc-tg" class="card-title agecalc-card-title">Age & Birthday Calculator</h3>
  <p class="card-desc agecalc-card-desc">
    Get exact age in years, months, days, hours and seconds with a live countdown to your next birthday. See weekday born, zodiac, leap year handling, milestones like 10,000 days, and age on planets. Private and fully in your browser.
  </p>
  <a class="card-cta agecalc-card-cta" href="/tools/age-birthday-calculator-sniptext.html" aria-label="Open Age & Birthday Calculator">Open â†’</a>
</article>

    <article class="tool-card flashcard-tool-card" tabindex="0"
                                            data-href="/tools/flashcard-creator-export-to-anki.html"
                                            aria-labelledby="flashcard-tg" data-filter="Engagement & Productivity">
                                      <div class="card-icon flashcard-card-icon" aria-hidden="true">
                                        <!-- Flashcard Creator icon: stacked cards + cloze brackets + export arrow -->
                                        <svg viewBox="0 0 24 24" class="svg-icon flashcard-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Flashcard Creator">
                                          <!-- back card -->
                                          <rect x="5" y="4" width="12" height="8" rx="1.6" fill="none" stroke="currentColor" stroke-width="1.4" opacity=".7"/>
                                          <!-- front card -->
                                          <rect x="7" y="8" width="12" height="10" rx="1.6" fill="none" stroke="currentColor" stroke-width="1.6"/>
                                          <!-- cloze brackets {{c1:: }} -->
                                          <path d="M10.4 11.2c-.7 0-1 .4-1 .9v2c0 .6.3.9 1 .9" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                                          <path d="M13.6 11.2c.7 0 1 .4 1 .9v2c0 .6-.3.9-1 .9" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                                          <rect x="11" y="12" width="1.4" height="1.2" rx=".2" fill="currentColor" />
                                          <!-- export down arrow to indicate Anki TSV/CSV -->
                                          <path d="M18.5 5.2v3.1" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                                          <path d="M17 7.6l1.5 1.5 1.5-1.5" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                                          <!-- small tag for card labels -->
                                          <path d="M15.3 16.4l2.2-2.2a1 1 0 0 1 1.4 0l1 1a1 1 0 0 1 0 1.4l-2.2 2.2a1.2 1.2 0 0 1-.8.3h-1.2v-1.2a1.2 1.2 0 0 1 .4-.9z" fill="none" stroke="currentColor" stroke-width="1.2"/>
                                          <circle cx="18.1" cy="15.9" r=".45" fill="currentColor"/>
                                        </svg>
                                      </div>
                                      <h3 id="flashcard-tg" class="card-title flashcard-card-title">Flashcard Creator - export to Anki</h3>
                                      <p class="card-desc flashcard-card-desc">
                                        Build Basic, Reverse and Cloze flashcards fast. Tag and search cards, bulk import from text or CSV/TSV, shuffle and study with a clean review mode, then export Anki-ready TSV or CSV in one click. Private, fast, and in your browser.
                                      </p>
                                      <a class="card-cta flashcard-card-cta"
                                        href="/tools/flashcard-creator-export-to-anki.html"
                                        aria-label="Open Flashcard Creator">Open â†’</a>
                                  </article>

  </section>

  <!-- Footer -->
  <footer id="main-footer" class="site-footer" aria-labelledby="footer-heading">
    <div class="footer-bg" aria-hidden="true"></div>
    <div class="footer-container">
      <div class="footer-logo">
        <h2 id="footer-heading" class="footer-brand">Snip Text</h2>
        <p>Empowering better writing, one tool at a time.</p>
      </div>
      <nav class="footer-links" aria-label="Footer links">
        <a href="/feedback.html">Feedback</a>
        <a href="contact.html#contact">Contact Us</a>
        <a href="/privacy-policy.html">Privacy Policy</a>
        <a href="/terms-of-use.html">Terms of Use</a>
      </nav>
      <div class="footer-bottom">
        <p>&copy; <span id="year"></span> <span class="powered-by">Snip Text - powered by <a href="https://checkai.pro" target="_blank" rel="noopener">CheckAI.pro</a></span> Â· All rights reserved.</p>
      </div>
    </div>
    <button class="to-top" id="to-top" aria-label="Back to top">
      <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
        <path d="M12 5l-6 6m6-6l6 6M12 5v14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </footer>

  <!-- Global JS includes (unchanged) -->
<script src="/js/index.js?v=reset1" defer></script>
  <script src="/js/auth.js?v=reset1"></script>
<script src="/tools/js/free-tools.js?v=reset1"></script>

  <!-- Page JS (no libs). All names use timeline-maker* -->
  <script>
  (function(){
    const qs = (s, root=document) => root.querySelector(s);
    const qsa = (s, root=document) => Array.from(root.querySelectorAll(s));

    // Elements
    const $input = qs('#timeline-maker-input');
    const $generate = qs('#timeline-maker-generate');
    const $sample = qs('#timeline-maker-sample');
    const $file = qs('#timeline-maker-file');
    const $delim = qs('#timeline-maker-delim');
    const $captionIn = qs('#timeline-maker-caption');
    const $eraIn = qs('#timeline-maker-era');
    const $zoom = qs('#timeline-maker-zoom');
    const $auto = qs('#timeline-maker-auto-sort');
    const $compact = qs('#timeline-maker-compact');

    const $filter = qs('#timeline-maker-filter');
    const $cat = qs('#timeline-maker-cat');

    const $wrap = qs('#timeline-maker-preview-wrap');
    const $preview = qs('#timeline-maker-preview');
    const $items = qs('#timeline-maker-items');
    const $captionEl = qs('#timeline-maker-caption-el');

    const $exportHTML1 = qs('#timeline-maker-copy-html');
    const $exportHTML2 = qs('#timeline-maker-copy2');
    const $exportSVG = qs('#timeline-maker-export-svg');
    const $exportJSON = qs('#timeline-maker-export-json');
    const $print = qs('#timeline-maker-print');
    const $code = qs('#timeline-maker-code');

    // State
    let events = []; // normalized
    let eras = [];   // [{start:Date,end:Date,label:string}]
    let filtered = [];

    // Helpers
    const ESC = s => s.replace(/[&<>"]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]));
    const parseNum = s => Number(String(s).replace(/,/g,''));
    const toISODate = d => isNaN(d?.getTime()) ? '' : d.toISOString().slice(0,10);

    function toast(msg){
      let el = qs('#timeline-maker-toast');
      if (!el) {
        el = document.createElement('div');
        el.id = 'timeline-maker-toast';
        el.style.cssText = 'position:fixed;left:50%;bottom:26px;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 14px;border-radius:12px;box-shadow:0 10px 20px rgba(0,0,0,.25);z-index:9999;font:600 13px/1 var(--font-body);';
        document.body.appendChild(el);
      }
      el.textContent = msg;
      el.style.opacity = '1';
      clearTimeout(el._t);
      el._t = setTimeout(()=>{ el.style.opacity = '0'; }, 1400);
    }

    function parseDateToken(tok){
      tok = (tok || '').trim();
      if (!tok) return {start:null,end:null,isRange:false};

      // Range with ..
      if (tok.includes('..')){
        const [a,b] = tok.split('..').map(s=>s.trim());
        return {start:parseSingle(a), end:parseSingle(b), isRange:true};
      }
      const d = parseSingle(tok);
      return {start:d, end:null, isRange:false};

      function parseSingle(s){
        if (!s) return null;
        // Try common patterns
        // YYYY-MM-DD or YYYY/MM/DD
        let m = s.match(/^(\d{4})[-\/](\d{1,2})[-\/](\d{1,2})$/);
        if (m) return new Date(Number(m[1]), Number(m[2])-1, Number(m[3]));
        // DD/MM/YYYY
        m = s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);
        if (m) return new Date(Number(m[3]), Number(m[2])-1, Number(m[1]));
        // YYYY-MM
        m = s.match(/^(\d{4})-(\d{1,2})$/);
        if (m) return new Date(Number(m[1]), Number(m[2])-1, 1);
        // YYYY
        m = s.match(/^(\d{4})$/);
        if (m) return new Date(Number(m[1]), 0, 1);
        // Natural short: Jan 2020
        m = s.match(/^([A-Za-z]{3,9})\s+(\d{4})$/);
        if (m) return new Date(Date.parse(m[1]+' 1, '+m[2]));
        // Fallback Date()
        const d = new Date(s);
        return isNaN(d.getTime()) ? null : d;
      }
    }

    function parseInput(text, delim){
      const D = (delim === 'tab') ? '\t' : delim;
      const rows = text.split(/\r?\n/).filter(Boolean);
      const out = [];
      for (const ln of rows){
        const parts = ln.split(D).map(s=>s.trim());
        // If user used pipe default but has " | " with spaces, also split safely
        if (D === '|' && parts.length === 1 && ln.includes(' | ')) {
          parts.splice(0,1,...ln.split(' | ').map(s=>s.trim()));
        }
        const [dateTok, title='', desc='', category='', color=''] = parts;
        const dateInfo = parseDateToken(dateTok || '');
        out.push({
          raw: ln,
          title, desc, category,
          color: (color || '').trim(),
          start: dateInfo.start,
          end: dateInfo.end,
          isRange: dateInfo.isRange
        });
      }
      return out;
    }

    function applyFilters(){
      const f = ($filter.value || '').toLowerCase();
      const cat = ($cat.value || '').toLowerCase();
      filtered = events.filter(e => {
        const hit = (e.title+' '+e.desc+' '+e.category).toLowerCase().includes(f);
        const hitCat = !cat || (e.category || '').toLowerCase() === cat;
        return hit && hitCat;
      });
      if ($auto.checked){
        filtered.sort((a,b)=>{
          const as = a.start ? a.start.getTime() : Number.POSITIVE_INFINITY;
          const bs = b.start ? b.start.getTime() : Number.POSITIVE_INFINITY;
          return as - bs;
        });
      }
    }

    function render(){
      applyFilters();
      $items.innerHTML = '';
      $preview.style.transform = 'scale('+(Number($zoom.value)/100)+')';
      $preview.style.transformOrigin = 'top left';

      // Caption / title
      const cap = ($captionIn.value || '').trim();
      if (cap){
        $captionEl.classList.remove('timeline-maker-hidden');
        $captionEl.textContent = cap;
      } else {
        $captionEl.classList.add('timeline-maker-hidden');
        $captionEl.textContent = '';
      }

      // Era band (single for simplicity)
      renderEra();

      // Items
      let idx = 0;
      for (const ev of filtered){
        const item = document.createElement('div');
        item.className = 'timeline-maker-item';
        if ($compact.checked){ item.style.marginBottom = '14px'; }

        const dateStr = ev.isRange
          ? (toISODate(ev.start)||'?') + ' â†’ ' + (toISODate(ev.end)||'?')
          : (toISODate(ev.start) || '?');

        const left = document.createElement('div');
        left.className = 'timeline-maker-time';
        left.innerHTML = '<time>'+ESC(dateStr)+'</time>';

        const dot = document.createElement('div');
        dot.className = 'timeline-maker-dot';
        if (ev.color){ dot.style.background = ev.color; dot.style.boxShadow = '0 0 0 4px '+hexToRGBA(ev.color, .18); }

        const right = document.createElement('div');
        right.className = 'timeline-maker-cardline';

        const title = document.createElement('div');
        title.className = 'timeline-maker-title2';
        title.textContent = ev.title || '(Untitled event)';

        const desc = document.createElement('div');
        desc.className = 'timeline-maker-desc';
        desc.textContent = ev.desc || '';

        const meta = document.createElement('div');
        meta.className = 'timeline-maker-meta';
        if (ev.category){ const t = document.createElement('span'); t.className='timeline-maker-tag'; t.textContent = ev.category; meta.appendChild(t); }
        if (ev.isRange){ const t2 = document.createElement('span'); t2.className='timeline-maker-tag'; t2.textContent = 'Range'; meta.appendChild(t2); }

        right.appendChild(title);
        if (ev.desc) right.appendChild(desc);
        right.appendChild(meta);

        item.appendChild(left);
        item.appendChild(right);
        item.appendChild(dot);

        // Simple drag reorder (keyboard friendly via buttons)
        item.draggable = true;
        item.addEventListener('dragstart', e => { e.dataTransfer.setData('text/plain', idx); });
        item.addEventListener('dragover', e => { e.preventDefault(); item.style.outline='2px dashed var(--timeline-maker-accent)'; });
        item.addEventListener('dragleave', ()=> item.style.outline='none');
        item.addEventListener('drop', e => {
          e.preventDefault();
          item.style.outline='none';
          const from = Number(e.dataTransfer.getData('text/plain'));
          const to = Array.from($items.children).indexOf(item);
          moveEvent(from, to);
        });

        $items.appendChild(item);
        idx++;
      }

      // Update code export
      $code.textContent = exportHTML();
    }

    function renderEra(){
      const v = ($eraIn.value || '').trim();
      // Syntax: start..end | label
      if (!v){ removeEra(); return; }
      const parts = v.split('|');
      const range = (parts[0] || '').trim();
      const label = (parts[1] || '').trim();
      const parsed = parseDateToken(range);
      if (!parsed.start || !parsed.end){ removeEra(); return; }
      eras = [{start:parsed.start, end:parsed.end, label}];
      const bar = qs('#timeline-maker-era-bar');
      if (!bar){
        const el = document.createElement('div');
        el.id = 'timeline-maker-era-bar';
        el.className = 'timeline-maker-era';
        $items.parentElement.insertBefore(el, $items);
      }
      qs('#timeline-maker-era-bar').textContent = label ? (label+' ('+toISODate(parsed.start)+' â†’ '+toISODate(parsed.end)+')') : (toISODate(parsed.start)+' â†’ '+toISODate(parsed.end));
    }
    function removeEra(){
      eras = [];
      const bar = qs('#timeline-maker-era-bar');
      if (bar) bar.remove();
    }

    function moveEvent(from, to){
      if (from === to || from < 0 || to < 0) return;
      const arr = filtered; // indexes relative to filtered
      const it = arr.splice(from,1)[0];
      arr.splice(to,0,it);
      // Also update original events order to reflect drag when auto sort is off
      if (!$auto.checked){
        // rebuild events keeping only filtered order first, then others
        const keep = new Set(arr);
        events = [...arr, ...events.filter(e=>!keep.has(e))];
      }
      render();
    }

    // Exports
    function exportHTML(){
      const cap = ($captionIn.value || '').trim();
      const eraHTML = eras.length ? `<div class="timeline-maker-era">${ESC(eras[0].label||'')+' ('+toISODate(eras[0].start)+' â†’ '+toISODate(eras[0].end)+')'}</div>\n` : '';
      const itemsHTML = filtered.map(ev=>{
        const dateStr = ev.isRange ? (toISODate(ev.start)||'?')+' â†’ '+(toISODate(ev.end)||'?') : (toISODate(ev.start)||'?');
        const colorStyle = ev.color ? ` style="--dot:${ev.color}"` : '';
        return `  <div class="timeline-maker-item">
    <div class="timeline-maker-time"><time>${ESC(dateStr)}</time></div>
    <div class="timeline-maker-cardline">
      <div class="timeline-maker-title2">${ESC(ev.title||'(Untitled event)')}</div>
      ${ev.desc ? `<div class="timeline-maker-desc">${ESC(ev.desc)}</div>` : ``}
      <div class="timeline-maker-meta">
        ${ev.category ? `<span class="timeline-maker-tag">${ESC(ev.category)}</span>` : ``}
        ${ev.isRange ? `<span class="timeline-maker-tag">Range</span>` : ``}
      </div>
    </div>
    <div class="timeline-maker-dot"></div>
  </div>`;
      }).join('\n');
      return `<div class="timeline-maker-preview">
  <div class="timeline-maker-axis" aria-hidden="true"></div>
  ${cap ? `<div class="timeline-maker-era">${ESC(cap)}</div>` : ``}
${eraHTML}${itemsHTML}
</div>`;
    }

    function exportJSON(){
      const payload = filtered.map(e=>({
        title:e.title, desc:e.desc, category:e.category, color:e.color,
        start: toISODate(e.start), end: toISODate(e.end), range:e.isRange
      }));
      return JSON.stringify(payload,null,2);
    }

    function exportSVG(){
      // Simple vertical timeline SVG snapshot (text only)
      const lineX = 60, top = 20, rowH = 40;
      const rows = filtered.length;
      const h = Math.max(120, top + rows*rowH + 20);
      const w = 900;
      const esc = s => (''+s).replace(/[&<>]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[m]));
      const items = filtered.map((e,i)=>{
        const y = top + i*rowH;
        const dateStr = e.isRange ? (toISODate(e.start)||'?')+' â†’ '+(toISODate(e.end)||'?') : (toISODate(e.start)||'?');
        const dot = `<circle cx="${lineX}" cy="${y}" r="5" fill="${e.color || '#3B82F6'}" />`;
        const date = `<text x="${lineX+20}" y="${y+4}" font-size="12" fill="#cbd5e1" font-family="Arial, sans-serif">${esc(dateStr)}</text>`;
        const title = `<text x="${lineX+160}" y="${y-3}" font-size="14" fill="#e5e7eb" font-weight="700" font-family="Arial, sans-serif">${esc(e.title||'(Untitled event)')}</text>`;
        const desc = e.desc ? `<text x="${lineX+160}" y="${y+13}" font-size="12" fill="#9ca3af" font-family="Arial, sans-serif">${esc(e.desc)}</text>` : ``;
        return `${dot}${date}${title}${desc}`;
      }).join('\n');
      const axis = `<line x1="${lineX}" y1="${top-10}" x2="${lineX}" y2="${h-20}" stroke="#64748b" stroke-width="2"/>`;
      const caption = ($captionIn.value||'') ? `<text x="${lineX}" y="${top-30}" font-size="16" fill="#f3f4f6" font-weight="700" font-family="Arial, sans-serif">${esc($captionIn.value)}</text>` : '';
      const svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}" xmlns="http://www.w3.org/2000/svg">
  <rect width="100%" height="100%" fill="#0B1120"/>
  ${caption}
  ${axis}
  ${items}
</svg>`;
      return svg;
    }

    function hexToRGBA(hex, alpha){
      hex = (hex||'').trim();
      if (!hex) return 'rgba(59,130,246,'+alpha+')';
      if (hex.startsWith('#')) hex = hex.slice(1);
      if (hex.length === 3) hex = hex.split('').map(x=>x+x).join('');
      const r = parseInt(hex.slice(0,2),16);
      const g = parseInt(hex.slice(2,4),16);
      const b = parseInt(hex.slice(4,6),16);
      return `rgba(${r},${g},${b},${alpha})`;
    }

    // Actions
    function runGenerate(){
      const delim = $delim.value;
      events = parseInput(($input.value||''), delim);
      if ($auto.checked){
        events.sort((a,b)=>{
          const as = a.start ? a.start.getTime() : Number.POSITIVE_INFINITY;
          const bs = b.start ? b.start.getTime() : Number.POSITIVE_INFINITY;
          return as - bs;
        });
      }
      render();
      toast('Timeline generated');
      saveState();
    }

    // Storage
    function saveState(){
      const st = {
        text:$input.value, delim:$delim.value, caption:$captionIn.value,
        era:$eraIn.value, zoom:$zoom.value, auto:$auto.checked, compact:$compact.checked
      };
      localStorage.setItem('timeline-maker-state', JSON.stringify(st));
    }
    (function restore(){
      try{
        const st = JSON.parse(localStorage.getItem('timeline-maker-state')||'{}');
        if (st.text) $input.value = st.text;
        if (st.delim) $delim.value = st.delim;
        if (st.caption) $captionIn.value = st.caption;
        if (st.era) $eraIn.value = st.era;
        if (st.zoom) $zoom.value = st.zoom;
        if (typeof st.auto === 'boolean') $auto.checked = st.auto;
        if (typeof st.compact === 'boolean') $compact.checked = st.compact;
      }catch{}
    })();

    // Event listeners
    $generate.addEventListener('click', runGenerate);
    $sample.addEventListener('click', ()=>{
      $input.value = `2018-09 | Cohort formed | Team assembled for initial research | Team | #3B82F6
2019-02-10 | Proposal approved | Funding greenlit for pilot | Research | #22c55e
2019-03..2019-10 | Pilot study | Phase I field work across 2 regions | Study | #7c3aed
2020-01-15 | Interim report | Submitted to advisory board | Reporting | #eab308
2020-03..2020-12 | Data collection (Phase II) | Extended sample size and controls | Study | #ef4444
2021 | Publication accepted | Journal of Example Studies | Publishing | #e85d27`;
      $eraIn.value = '2019-01..2020-12 | Program Pilot';
      runGenerate();
    });
    $file.addEventListener('change', async (e)=>{
      const f = e.target.files?.[0]; if (!f) return;
      const text = await f.text();
      // Try to detect delimiter from first line
      const first = text.split(/\r?\n/)[0] || '';
      if (first.includes('|')) $delim.value='|';
      else if (first.includes(',')) $delim.value=',';
      else if (first.includes('\t')) $delim.value='tab';
      else if (first.includes(';')) $delim.value=';';
      $input.value = text;
      runGenerate();
    });

    [$input,$captionIn,$eraIn,$zoom,$auto,$compact,$delim].forEach(el=> el.addEventListener('input', ()=>{ saveState(); if (el=== $zoom) render(); }));
    $filter.addEventListener('input', render);
    $cat.addEventListener('input', render);

    // Export buttons
    function download(filename, content, type='text/plain'){
      const blob = new Blob([content], {type});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(a.href);
    }
    function copyHTML(){
      navigator.clipboard.writeText($code.textContent || '').then(()=> toast('HTML copied')).catch(()=> toast('Copy failed'));
    }
    $exportHTML1.addEventListener('click', ()=> download('timeline.html', $code.textContent || '', 'text/html'));
    $exportHTML2.addEventListener('click', copyHTML);
    $exportJSON.addEventListener('click', ()=> download('timeline.json', exportJSON(), 'application/json'));
    $exportSVG.addEventListener('click', ()=> download('timeline.svg', exportSVG(), 'image/svg+xml'));
    $print.addEventListener('click', ()=> window.print());

    // Keyboard shortcuts
    document.addEventListener('keydown', (e)=>{
      if ((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='enter'){ e.preventDefault(); runGenerate(); }
      if ((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='c' && document.activeElement === $code){ e.preventDefault(); copyHTML(); }
      if ((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='p'){ e.preventDefault(); window.print(); }
    });

    // Initial render (empty)
    render();
  })();
  </script>
</body>
</html>

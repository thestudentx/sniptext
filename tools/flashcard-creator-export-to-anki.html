<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GE98V48RK8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config','G-GE98V48RK8');
  </script>

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "t5y2d08vd0");
  </script>
  <meta name="msvalidate.01" content="A9EB890789B5C28E62629F99EEDC30A1" />

  <!-- Essentials -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <base href="/tools/">

  <!-- Primary SEO -->
  <title>Flashcard Creator - export to Anki (TSV/CSV), Cloze & Review Mode | SnipText</title>
  <meta name="description" content="Build beautiful flashcards fast. Create Basic, Reverse and Cloze cards, tag them, import text, and export to Anki-friendly TSV/CSV. Study with a clean review mode and local progress. Private and in-browser." />
  <meta name="keywords" content="flashcard creator, anki export, tsv, csv, cloze deletion, spaced repetition, study cards, flashcard maker, deck builder, review mode" />
  <meta name="author" content="SnipText" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://checkai.pro/tools/flashcard-creator-export-to-anki" />
  <link rel="alternate" href="https://checkai.pro/tools/flashcard-creator-export-to-anki" hreflang="en" />
  <link rel="alternate" href="https://checkai.pro/tools/flashcard-creator-export-to-anki" hreflang="x-default" />

  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css?v=reset1" />
  <link rel="stylesheet" href="/tools/css/free-tools.css?v=reset1" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="SnipText" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="Flashcard Creator - export to Anki, Cloze & Review Mode" />
  <meta property="og:description" content="Create Basic, Reverse and Cloze cards. Import text, tag, sort, and export to Anki TSV/CSV. Review with gentle animations. Private, fast, in your browser." />
  <meta property="og:url" content="https://checkai.pro/tools/flashcard-creator-export-to-anki.html" />
  <meta property="og:image" content="https://checkai.pro/images/sniptext-default-tools-img.png" />
  <meta property="og:image:secure_url" content="https://checkai.pro/images/sniptext-default-tools-img.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="SnipText Flashcard Creator preview" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Flashcard Creator - export to Anki, Cloze & Review Mode" />
  <meta name="twitter:description" content="Build study decks quickly and export to Anki-friendly TSV/CSV. Works offline after first load." />
  <meta name="twitter:image" content="https://checkai.pro/images/sniptext-default-tools-img.png" />

  <!-- Theme / Icons -->
  <meta name="theme-color" content="#0F172A" />
  <link rel="icon" href="/favicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png" />

  <!-- Fonts (brand stack) -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>

  <!-- Structured Data: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"SoftwareApplication",
    "name":"SnipText Flashcard Creator",
    "applicationCategory":"EducationalApplication",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "url":"https://checkai.pro/tools/flashcard-creator-export-to-anki.html",
    "featureList":[
      "Create Basic, Reverse, and Cloze flashcards",
      "Export to Anki-friendly TSV/CSV",
      "Deck name, tags, and note type selection",
      "Import from formatted text",
      "Built-in review mode with keyboard shortcuts",
      "Local autosave and session restore",
      "JSON export for backup"
    ],
    "publisher":{"@type":"Organization","name":"SnipText","logo":{"@type":"ImageObject","url":"https://checkai.pro/favicon.png","width":512,"height":512}}
  }
  </script>

  <!-- Structured Data: FAQPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"Can I export to Anki?",
       "acceptedAnswer":{"@type":"Answer","text":"Yes. Export TSV or CSV with Front, Back and Tags which you can import into Anki. Cloze cards are supported using {{c1::text}} syntax."}},
      {"@type":"Question","name":"Do you store my cards?",
       "acceptedAnswer":{"@type":"Answer","text":"No. Everything runs locally in your browser. Optional autosave uses your device storage."}},
      {"@type":"Question","name":"Does it support Cloze deletions?",
       "acceptedAnswer":{"@type":"Answer","text":"Yes. Write Cloze like {{c1::photosynthesis}} in the Front field, or use the Cloze helper to wrap selections."}},
      {"@type":"Question","name":"Is there a study mode?",
       "acceptedAnswer":{"@type":"Answer","text":"Yes. Use Review Mode to flip cards, mark Easy/Good/Hard, and track session progress."}}
    ]
  }
  </script>

  <!-- Structured Data: Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://checkai.pro/"},
      {"@type":"ListItem","position":2,"name":"Free Tools","item":"https://checkai.pro/tools/free-tools.html"},
      {"@type":"ListItem","position":3,"name":"Flashcard Creator","item":"https://checkai.pro/tools/flashcard-creator-export-to-anki.html"}
    ]
  }
  </script>

  <!-- Styles (self-contained) -->
  <style>
/* ==============================================
   SNIPTEXT • FLASHCARD CREATOR (dark theme)
   Brand-aware tokens (names include 'flashcard')
   ============================================== */
:root{
  /* Colors mapped to brand codes */
  --flashcard-primary:#1D4ED8;
  --flashcard-accent:#3B82F6;
  --flashcard-warm:#ff7c4c;

  --flashcard-bg:#0F172A;
  --flashcard-bg-soft:#1d1f2f;
  --flashcard-text:#ffffff;
  --flashcard-muted:rgba(255,255,255,.78);
  --flashcard-border:rgba(255,255,255,.14);

  --flashcard-surface:rgba(255,255,255,.06);
  --flashcard-surface-2:rgba(255,255,255,.04);

  --flashcard-ok:#22c55e;
  --flashcard-warn:#e85d27;
  --flashcard-danger:#ef4444;

  --flashcard-r-xl:20px;
  --flashcard-r-lg:14px;
  --flashcard-r-md:10px;

  --flashcard-shadow-1:0 10px 30px rgba(0,0,0,.35);
  --flashcard-shadow-2:0 18px 48px rgba(17,24,39,.46);

  --flashcard-maxw:1200px;

  --flashcard-font-head:'Poppins','Segoe UI',system-ui,-apple-system,Roboto,'Helvetica Neue',Arial,sans-serif;
  --flashcard-font-body:'Roboto','Segoe UI',system-ui,-apple-system,'Helvetica Neue',Arial,sans-serif;

  color-scheme:dark;
}
html,body{height:100%}
body{
  margin:0; color:var(--flashcard-text); font-family:var(--flashcard-font-body); line-height:1.55;
  background:
    radial-gradient(1200px 600px at 10% -10%, color-mix(in oklab, var(--flashcard-primary) 26%, transparent), transparent 60%),
    radial-gradient(900px 500px at 100% 0%,  color-mix(in oklab, var(--flashcard-accent) 22%, transparent), transparent 52%),
    radial-gradient(800px 520px at 0% 100%, color-mix(in oklab, var(--flashcard-warm) 12%, transparent), transparent 58%),
    linear-gradient(180deg, var(--flashcard-bg) 0%, var(--flashcard-bg-soft) 100%);
  background-attachment: fixed;
}

/* Page shell */
.flashcard-main{
  width:min(var(--flashcard-maxw),92vw);
  margin: clamp(16px,3vw,40px) auto 80px;
}
.flashcard-hero{
  display:grid; grid-template-columns: 1.1fr .9fr; gap: clamp(14px,2.4vw,22px); align-items:center;
  border:1px solid var(--flashcard-border);
  border-radius:var(--flashcard-r-xl);
  padding: clamp(18px,3vw,28px);
  background: linear-gradient(135deg,
    color-mix(in oklab, var(--flashcard-primary) 20%, transparent),
    color-mix(in oklab, var(--flashcard-accent) 18%, transparent)
  ) border-box;
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  box-shadow: var(--flashcard-shadow-1);
  position:relative; overflow:hidden;
}
@media (max-width:960px){ .flashcard-hero{ grid-template-columns:1fr } }
.flashcard-hero::after{
  content:""; position:absolute; inset:-3px; filter: blur(16px); opacity:.6; pointer-events:none;
  background:
    radial-gradient(600px 220px at 18% -6%, color-mix(in oklab, var(--flashcard-primary) 28%, transparent), transparent 65%),
    radial-gradient(460px 280px at 86% 0%,  color-mix(in oklab, var(--flashcard-accent) 26%, transparent), transparent 62%);
}
.flashcard-title{
  margin:0 0 6px; font-weight:800; letter-spacing:.2px; line-height:1.12;
  font-family:var(--flashcard-font-head);
  font-size: clamp(22px,3.2vw,36px);
  background: linear-gradient(90deg,#fff,
    color-mix(in oklab, var(--flashcard-accent) 54%, #fff) 38%,
    color-mix(in oklab, var(--flashcard-warm) 40%, #fff) 78%, #fff);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.flashcard-subtitle{ margin:6px 0 0; color:var(--flashcard-muted); font-size:clamp(14px,1.8vw,16px) }
.flashcard-badges{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px }
.flashcard-badge{
  padding:6px 10px; border:1px solid var(--flashcard-border); border-radius:999px;
  background: color-mix(in oklab, var(--flashcard-bg) 72%, transparent); color:#dbe7ff; font-size:.82rem;
}

.flashcard-icon {
  width: 42%;
  height: 42%;
  color: #fff; /* or match your theme accent */
  opacity: 0.88;
  animation: flashcard-float 4s ease-in-out infinite;
}

@keyframes flashcard-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}


/* Grid layout */
.flashcard-grid{
  margin-top: clamp(14px,2.6vw,24px);
  display:grid; grid-template-columns: 1.1fr .9fr; gap: clamp(12px,2.4vw,20px);
}
@media (max-width:980px){ .flashcard-grid{ grid-template-columns:1fr } }

.flashcard-card{
  border:1px solid var(--flashcard-border);
  border-radius:var(--flashcard-r-lg);
  background: var(--flashcard-surface);
  box-shadow: var(--flashcard-shadow-2);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  overflow:hidden;
}
.flashcard-card-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:12px 14px;
  background: linear-gradient(90deg,
    color-mix(in oklab, var(--flashcard-primary) 12%, transparent),
    color-mix(in oklab, var(--flashcard-accent) 10%, transparent)
  );
  border-bottom:1px solid var(--flashcard-border);
}
.flashcard-card-title{ margin:0; font-size:13px; letter-spacing:.35px; text-transform:uppercase; opacity:.9; font-family:var(--flashcard-font-head) }

.flashcard-section{ padding:12px 14px; display:grid; gap:10px }

/* Inputs */
.flashcard-field{ display:grid; gap:6px }
.flashcard-label{ font-weight:700; font-size:.95rem; color:#dfe7ff; letter-spacing:.2px }
.flashcard-input, .flashcard-text{
  background:#0e1730; color:#e6ecff; border:1px solid var(--flashcard-border);
  border-radius:10px; padding:12px 14px; outline:none;
  transition:border-color .2s ease, box-shadow .2s ease, transform .12s ease;
}
.flashcard-text{ min-height:110px; resize:vertical }
.flashcard-input:focus, .flashcard-text:focus{
  border-color: rgba(59,130,246,.55); box-shadow:0 0 0 3px rgba(59,130,246,.25); transform:translateY(-1px)
}

/* Controls */
.flashcard-row{ display:flex; gap:8px; flex-wrap:wrap; align-items:center }
.flashcard-btn{
  --_bg: linear-gradient(180deg, color-mix(in oklab, var(--flashcard-primary) 70%, transparent), color-mix(in oklab, var(--flashcard-accent) 62%, transparent));
  --_txt:#fff; --_bd: color-mix(in oklab, #000 12%, var(--flashcard-primary));
  appearance:none; border:1px solid var(--_bd); background:var(--_bg); color:var(--_txt);
  padding:10px 12px; border-radius:12px; font-weight:700; font-size:13px; letter-spacing:.3px; cursor:pointer;
  transition: transform .15s ease, filter .15s ease, box-shadow .2s ease, background .3s ease;
  box-shadow: 0 10px 20px rgba(29,78,216,.22), 0 6px 14px rgba(59,130,246,.16);
  font-family:var(--flashcard-font-head);
}
.flashcard-btn:hover{ transform: translateY(-1px); filter: brightness(1.06) }
.flashcard-btn:active{ transform: translateY(0); filter: brightness(.98) }
.flashcard-btn-ghost{ background:transparent; color:#e5e7eb; border:1px dashed var(--flashcard-border); box-shadow:none }
.flashcard-btn-warm{ background: linear-gradient(135deg, var(--flashcard-accent), var(--flashcard-warm)); border-color:transparent }

.flashcard-chip{
  padding:6px 10px; border:1px solid var(--flashcard-border); border-radius:999px;
  background: color-mix(in oklab, var(--flashcard-bg) 72%, transparent); color:#bcd3ff; font-size:.8rem;
}

/* Deck list */
.flashcard-list{ display:grid; gap:8px; max-height:420px; overflow:auto; padding:0 10px 10px 0 }
.flashcard-item{
  display:grid; gap:6px; padding:10px; border:1px solid var(--flashcard-border); border-radius:10px;
  background: var(--flashcard-surface-2);
  transition: border-color .2s ease, background .2s ease, transform .15s ease;
}
.flashcard-item:hover{ border-color: rgba(255,255,255,.2); background: rgba(255,255,255,.06); transform: translateY(-1px) }
.flashcard-item-head{ display:flex; gap:8px; align-items:center; justify-content:space-between }
.flashcard-tag{ font-size:.75rem; opacity:.9 }

/* Review mode */
.flashcard-review-wrap{ display:grid; gap:12px }
.flashcard-review-stage{
  position:relative; perspective:1000px;
}
.flashcard-card3d{
  position:relative; transform-style:preserve-3d; transition: transform .5s var(--flashcard-ease, cubic-bezier(.22,.61,.36,1));
  border:1px solid var(--flashcard-border); border-radius:16px; padding:18px;
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  min-height:160px; display:grid; place-items:center; text-align:center;
}
.flashcard-card3d.is-flipped{ transform: rotateY(180deg) }
.flashcard-side{
  position:absolute; inset:0; display:grid; place-items:center; padding:18px;
  backface-visibility:hidden; -webkit-backface-visibility:hidden;
}
.flashcard-back{ transform:rotateY(180deg) }
.flashcard-review-controls{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center }

.flashcard-progress{
  height:12px; border-radius:999px; background:rgba(255,255,255,.08);
  border:1px solid var(--flashcard-border); overflow:hidden; position:relative;
}
.flashcard-progress>i{ display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--flashcard-primary), var(--flashcard-accent)) }

/* Toast */
.flashcard-toast{
  position: fixed; inset: auto 16px 16px auto;
  background: #0b1223ee; color:#e5e7eb; padding: 10px 14px; border-radius: 12px; border:1px solid var(--flashcard-border);
  backdrop-filter: blur(8px); box-shadow: var(--flashcard-shadow-1);
  transform: translateY(20px); opacity:0; pointer-events:none;
  transition: transform .25s ease, opacity .25s ease;
  z-index: 50;
}
.flashcard-toast.show{ transform: translateY(0); opacity:1 }

/* Subtle float */
@media (prefers-reduced-motion:no-preference){
  .flashcard-card{ animation: flashcard-float 18s ease-in-out infinite }
  @keyframes flashcard-float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-2px)} }
}

/* Utility */
.kbd{
  font: 600 11px/1.2 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
  background: color-mix(in oklab, var(--flashcard-bg) 78%, transparent); color:#cbd5e1;
  padding:3px 6px; border-radius:8px; border:1px solid var(--flashcard-border);
}

.feature-card-all-pages {margin: 0 2rem;}
.tools-grid {margin: 1rem; background: #0e1730;}
.tool-card {background: #0f1b34;}
@media (max-width: 600px) { .tools-grid {margin: 1rem 0;} }
  </style>
</head>

<body>



    

<nav id="main-navbar">
  <div class="nav-container">
    <div class="logo">
      <a href="/index.html">Snip Text</a>
    </div>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul class="nav-links" id="nav-links">
      <li><a href="/index.html">Home</a></li>
      <li><a href="/tools/free-tools.html">Free Tools</a></li>
      <li><a href="features.html">Features</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="/blog/blog.html">Blog</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a id="nav-dashboard-link" href="login.html">Dashboard</a></li>
      <li><a id="nav-logout-link" href="#" style="display:none;">Logout</a></li>
    </ul>
  </div>
</nav>



  


<main class="flashcard-main" id="flashcard-main" aria-label="Flashcard Creator">
  <!-- Hero -->
  <section class="flashcard-hero" aria-labelledby="flashcard-title">
    <div>
      <h1 class="flashcard-title" id="flashcard-title">Flashcard Creator - export to Anki</h1>
      <p class="flashcard-subtitle">Create Basic, Reverse and Cloze cards, tag and sort them, import from text, and export to Anki-friendly TSV/CSV. Study in a clean review mode with keyboard shortcuts.</p>
      <div class="flashcard-badges">
        <span class="flashcard-badge">Private & client-side</span>
        <span class="flashcard-badge">Cloze helper</span>
        <span class="flashcard-badge">TSV/CSV export</span>
        <span class="flashcard-badge">Review mode</span>
      </div>
    </div>
    <div class="flashcard-hero-art" aria-hidden="true">
  <div class="flashcard-orb">
    <svg class="flashcard-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Flashcard icon">
      <!-- stacked cards -->
      <rect x="6" y="6" width="12" height="8" rx="1.4" fill="none" stroke="currentColor" stroke-width="1.6"/>
      <rect x="8.5" y="9.5" width="12" height="8" rx="1.4" fill="none" stroke="currentColor" stroke-width="1.2" opacity=".7"/>
      <!-- simple text lines on card -->
      <line x1="8" y1="9.5" x2="16" y2="9.5" stroke="currentColor" stroke-width="1"/>
      <line x1="8" y1="12" x2="14" y2="12" stroke="currentColor" stroke-width="1"/>
    </svg>
  </div>
</div>
  </section>

  <!-- Grid -->
  <section class="flashcard-grid">
    <!-- LEFT: Builder -->
    <article class="flashcard-card">
      <header class="flashcard-card-head">
        <h2 class="flashcard-card-title">Build cards</h2>
        <div class="flashcard-row">
          <button class="flashcard-btn flashcard-btn-ghost" id="flashcard-clearAll" title="Clear deck">Clear</button>
          <button class="flashcard-btn" id="flashcard-exportJSON" title="Export JSON">Export JSON</button>
        </div>
      </header>

      <div class="flashcard-section">
        <div class="flashcard-row">
          <div class="flashcard-field" style="flex:1 1 220px">
            <label class="flashcard-label" for="flashcard-deck">Deck name</label>
            <input id="flashcard-deck" class="flashcard-input" placeholder="e.g., Biology - Photosynthesis" value="My Study Deck"/>
          </div>
          <div class="flashcard-field" style="width:180px">
            <label class="flashcard-label" for="flashcard-type">Note type</label>
            <select id="flashcard-type" class="flashcard-input">
              <option value="basic">Basic (Front/Back)</option>
              <option value="reverse">Basic & Reverse</option>
              <option value="cloze">Cloze</option>
            </select>
          </div>
          <div class="flashcard-field" style="width:180px">
            <label class="flashcard-label" for="flashcard-tags">Default tags</label>
            <input id="flashcard-tags" class="flashcard-input" placeholder="comma,separated,tags"/>
          </div>
        </div>

        <div class="flashcard-field">
          <label class="flashcard-label" for="flashcard-front">Front <small class="flashcard-chip">Supports {{c1::cloze}} syntax</small></label>
          <textarea id="flashcard-front" class="flashcard-text" placeholder="Question, term, or sentence with {{c1::hidden}} part…"></textarea>
        </div>
        <div class="flashcard-field" id="flashcard-back-wrap">
          <label class="flashcard-label" for="flashcard-back">Back</label>
          <textarea id="flashcard-back" class="flashcard-text" placeholder="Answer or explanation…"></textarea>
        </div>
        <div class="flashcard-row">
          <input id="flashcard-tags-once" class="flashcard-input" placeholder="Add tags for this card (optional)" style="flex:1 1 220px"/>
          <button class="flashcard-btn" id="flashcard-add">Add card</button>
          <button class="flashcard-btn flashcard-btn-ghost" id="flashcard-clozeWrap" title="Wrap selection with {{c1::…}}">Cloze selection</button>
        </div>

        <div class="flashcard-row" style="justify-content:space-between">
          <div class="flashcard-chip" id="flashcard-counter">0 cards</div>
          <div class="flashcard-row">
            <button class="flashcard-btn flashcard-btn-ghost" id="flashcard-importTxt">Import text</button>
            <label class="flashcard-btn flashcard-btn-ghost" for="flashcard-file" style="cursor:pointer">Import .json<input id="flashcard-file" type="file" accept=".json" hidden></label>
          </div>
        </div>

        <div class="flashcard-section" style="padding-top:0">
          <details>
            <summary class="flashcard-label">Bulk add (paste). Formats supported</summary>
            <div class="flashcard-section" style="background:rgba(255,255,255,.03); border-radius:12px">
              <ul class="flashcard-muted">
                <li><b>Q/A lines:</b> <code>Q: ...</code> on one line, next line <code>A: ...</code>, blank line between cards.</li>
                <li><b>CSV/TSV:</b> Front,Back,Tags (comma tags).</li>
                <li><b>Cloze:</b> Use <code>{{c1::text}}</code> in Front. Back optional.</li>
              </ul>
              <textarea id="flashcard-bulk" class="flashcard-text" placeholder="Q: What is ATP?
A: The energy currency of the cell.

Term,Definition,biology,cell
Cloze example with {{c1::photosynthesis}} occurs in chloroplasts."></textarea>
              <div class="flashcard-row">
                <select id="flashcard-bulk-type" class="flashcard-input" style="width:220px">
                  <option value="qa">Q/A lines</option>
                  <option value="csv">CSV (Front,Back,Tags)</option>
                  <option value="tsv">TSV (Front<TAB>Back<TAB>Tags)</option>
                </select>
                <button class="flashcard-btn" id="flashcard-bulk-add">Add all</button>
              </div>
            </div>
          </details>
        </div>
      </div>
    </article>

    <!-- RIGHT: Export, List, Review -->
    <aside class="flashcard-card">
      <header class="flashcard-card-head">
        <h2 class="flashcard-card-title">Export & review</h2>
        <div class="flashcard-row">
          <button class="flashcard-btn" id="flashcard-export-tsv">Export Anki TSV</button>
          <button class="flashcard-btn flashcard-btn-ghost" id="flashcard-export-csv">Export CSV</button>
        </div>
      </header>

      <div class="flashcard-section">
        <div class="flashcard-row">
          <input id="flashcard-search" class="flashcard-input" placeholder="Search cards (front/back/tags)" style="flex:1 1 auto">
          <button class="flashcard-btn flashcard-btn-ghost" id="flashcard-shuffle">Shuffle</button>
          <button class="flashcard-btn flashcard-btn-warm" id="flashcard-start-review">Start review</button>
        </div>

        <div class="flashcard-list" id="flashcard-list" aria-live="polite"></div>

        <div class="flashcard-review-wrap" id="flashcard-review" hidden>
          <div class="flashcard-progress" aria-label="Session progress"><i id="flashcard-bar"></i></div>
          <div class="flashcard-review-stage">
            <div class="flashcard-card3d" id="flashcard-card3d" tabindex="0" aria-label="Flashcard. Press Space to flip.">
              <div class="flashcard-side flashcard-front" id="flashcard-front-side"></div>
              <div class="flashcard-side flashcard-back" id="flashcard-back-side"></div>
            </div>
          </div>
          <div class="flashcard-review-controls">
            <button class="flashcard-btn" id="flashcard-flip"><span class="kbd">Space</span> Flip</button>
            <button class="flashcard-btn flashcard-btn-ghost" id="flashcard-hard"><span class="kbd">1</span> Hard</button>
            <button class="flashcard-btn" id="flashcard-good"><span class="kbd">2</span> Good</button>
            <button class="flashcard-btn flashcard-btn-warm" id="flashcard-easy"><span class="kbd">3</span> Easy</button>
          </div>
        </div>
      </div>
    </aside>
  </section>

  <div class="free-tools-guide" style="margin-top:16px">
    <p class="free-tools-guide-p">See Flashcard Creator Guide on SnipText Blog Page <a href="/blog/flashcard-creator-export-to-anki-cloze-bulk-import-tags-review-workflow-sniptext-blog.html" class="free-tools-blog-link">here</a>. Also try <a href="/tools/random-writing-prompt-generator-json-list-filters-export.html">Writing Prompt Generator</a> for study prompts and <a href="/tools/word-counter.html">Word Counter</a> for quick stats.</p>
  </div>
</main>

<div class="flashcard-toast" id="flashcard-toast" role="status" aria-live="polite"></div>


  

  <!-- TOOLS GRID -->
       <div class="feature-card-all-pages">
        <h1 class="feature-card-all-pages-para">Featured Tools</h1>
       </div>
  <section id="tools-grid" class="tools-grid" aria-label="Tools list">
    <!-- Tool cards - 10 items -->

    <article class="tool-card" tabindex="0" data-href="/tools/timeline-maker-academic-timeline.html" aria-labelledby="t13" data-filter="Academic & Planning">
          <div class="card-icon" aria-hidden="true">
            <!-- Timeline icon: calendar + vertical line with nodes -->
            <svg viewBox="0 0 24 24" class="svg-icon">
              <!-- Calendar frame -->
              <rect x="3" y="4.5" width="18" height="16" rx="2.5" ry="2.5" stroke="currentColor" stroke-width="1.4" fill="none"/>
              <path d="M3 8h18" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" />
              <path d="M8 4.5v-2M16 4.5v-2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <!-- Vertical timeline -->
              <path d="M8.5 11v7" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <circle cx="8.5" cy="12.5" r="1.4" fill="currentColor"/>
              <circle cx="8.5" cy="15.5" r="1.4" fill="currentColor"/>
              <circle cx="8.5" cy="18" r="1.4" fill="currentColor"/>
              <!-- Event cards hint -->
              <path d="M11.5 12.5h6M11.5 15.5h5M11.5 18h4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
            </svg>
          </div>
          <h3 id="t13" class="card-title">Timeline Maker</h3>
          <p class="card-desc">Enter events to auto-generate an academic-style timeline with categories, eras, zoom, drag-reorder, and one-click export to HTML, SVG, or JSON. Private, in-browser.</p>
          <a class="card-cta" href="/tools/timeline-maker-academic-timeline.html" aria-label="Open Timeline Maker">Open →</a>
        </article>

    <article class="tool-card grade-calc-tool-card" tabindex="0" data-href="/tools/grade-calculator-percentage-letter-weighted-average-gpa-sniptext.html" aria-labelledby="gc-tg" data-filter="Academic & Planning">
          <div class="card-icon grade-calc-card-icon" aria-hidden="true">
            <!-- Grade icon: graduation cap + gauge -->
            <svg viewBox="0 0 24 24" class="svg-icon grade-calc-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Grade Calculator">
              <!-- mortarboard -->
              <path d="M3 8l9-4 9 4-9 4-9-4z" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
              <path d="M7 10v3.5c0 .8 2.7 1.8 5 1.8s5-1 5-1.8V10" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <!-- tassel -->
              <path d="M18 9.5v4.5m0 0a1.5 1.5 0 1 0 0 3" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
              <!-- gauge ring -->
              <path d="M12 20a6 6 0 1 0-6-6" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" opacity=".9"/>
              <path d="M12 14l2.8-2" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
            </svg>
          </div>
          <h3 id="gc-tg" class="card-title grade-calc-card-title">Grade Calculator</h3>
          <p class="card-desc grade-calc-card-desc">
            Convert percentages to letter grades and compute weighted averages across categories. Drop lowest scores, run what-if finals, calculate the required score to hit a target, and estimate GPA. Import/Export CSV or JSON. Private, in-browser.
          </p>
          <a class="card-cta grade-calc-card-cta" href="/tools/grade-calculator-percentage-letter-weighted-average-gpa-sniptext.html" aria-label="Open Grade Calculator">Open →</a>
        </article>

    <article class="tool-card table-gen-tool-card" tabindex="0" data-href="/tools/quick-table-generator-csv-to-html-table-code.html" aria-labelledby="table-gen-tg" data-filter="Academic & Planning">
        <div class="card-icon table-gen-card-icon" aria-hidden="true">
          <!-- Grid/Table icon -->
          <svg viewBox="0 0 24 24" class="svg-icon table-gen-svg" xmlns="http://www.w3.org/2000/svg" role="img">
            <rect x="3" y="4" width="18" height="16" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="1.4"/>
            <path d="M3 9h18M3 14h18M8 4v16M14 4v16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 id="table-gen-tg" class="card-title table-gen-card-title">Quick Table Generator</h3>
        <p class="card-desc table-gen-card-desc">
          Paste or upload CSV to generate clean, responsive HTML table code with auto-detect delimiter, header toggle, sort, filter, paginate, transpose, sticky header, and one-click copy or download. Private, in-browser.
        </p>
        <a class="card-cta table-gen-card-cta" href="/tools/quick-table-generator-csv-to-html-table-code.html" aria-label="Open Quick Table Generator">Open →</a>
      </article>

    <article class="tool-card writingprompt-tool-card" tabindex="0"
                      data-href="/tools/random-writing-prompt-generator-json-list-filters-export.html"
                      aria-labelledby="writingprompt-tg" data-filter="Text & Writing Tools">
                      <div class="card-icon writingprompt-card-icon" aria-hidden="true">
                        <!-- Writing Prompt icon: dice + pencil + spark -->
                        <svg viewBox="0 0 24 24" class="svg-icon writingprompt-svg" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Random Writing Prompt Generator">
                          <!-- dice -->
                          <rect x="2.5" y="2.5" width="9" height="9" rx="2" fill="none" stroke="currentColor" stroke-width="1.4"/>
                          <circle cx="5.3" cy="5.3" r="0.9" fill="currentColor"/>
                          <circle cx="8.7" cy="5.3" r="0.9" fill="currentColor"/>
                          <circle cx="7" cy="8.7" r="0.9" fill="currentColor"/>
                          <!-- pencil -->
                          <path d="M14.2 6.8l6.6 6.6c.5.5.5 1.3 0 1.8l-3.6 3.6c-.5.5-1.3.5-1.8 0l-6.6-6.6 5.4-5.4z" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                          <path d="M7.9 12.1l1.8 1.8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                          <!-- pencil tip fill -->
                          <path d="M20.8 13.6l-1.8-1.8-1.5 1.5 1.8 1.8 1.5-1.5z" fill="currentColor"/>
                          <!-- spark -->
                          <path d="M12.2 2.6l.5-1 .5 1 1 .5-1 .5-.5 1-.5-1-1-.5 1-.5z" stroke="currentColor" stroke-width="1.1" fill="none"/>
                        </svg>
                      </div>
                      <h3 id="writingprompt-tg" class="card-title writingprompt-card-title">Random Writing Prompt Generator</h3>
                      <p class="card-desc writingprompt-card-desc">
                        Generate story ideas with genre, tone, and length filters. Save favorites, search the library, import your own JSON list, and export visible results as JSON or CSV. Share a link to your exact settings. Private, in-browser.
                      </p>
                      <a class="card-cta writingprompt-card-cta"
                        href="/tools/random-writing-prompt-generator-json-list-filters-export.html"
                        aria-label="Open Random Writing Prompt Generator">Open →</a>
                  </article>

  </section>







  
<footer id="main-footer" class="site-footer" aria-labelledby="footer-heading">
  <!-- decorative background -->
  <div class="footer-bg" aria-hidden="true"></div>

  <div class="footer-container">
    <div class="footer-logo">
      <h2 id="footer-heading" class="footer-brand">Snip Text</h2>
      <p>Empowering better writing, one tool at a time.</p>
    </div>

    <nav class="footer-links" aria-label="Footer links">
      <a href="/feedback.html">Feedback</a>
      <a href="contact.html#contact">Contact Us</a>
      <a href="/privacy-policy.html">Privacy Policy</a>
      <a href="/terms-of-use.html">Terms of Use</a>
    </nav>

    <div class="footer-bottom">
      <p>
        &copy; <span id="year"></span>
        <span class="powered-by">
          Snip Text - powered by
          <a href="https://checkai.pro" target="_blank" rel="noopener">CheckAI.pro</a>
        </span>
        · All rights reserved.
      </p>
    </div>
  </div>

  <!-- back to top -->
  <button class="to-top" id="to-top" aria-label="Back to top">
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M12 5l-6 6m6-6l6 6M12 5v14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>
</footer>





  <!-- =========================
       SCRIPT
       ========================= -->
<script src="/js/index.js?v=reset1" defer></script>
  <script src="/js/auth.js?v=reset1"></script>
<script src="/tools/js/free-tools.js?v=reset1"></script>

<!-- Script -->
<script>
(() => {
  const $ = (s, root=document) => root.querySelector(s);
  const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));

  // State
  let flashcards = []; // {id, front, back, tags[], type, due, lapses, ease}
  let filtered = [];
  let reviewQueue = [];
  let curIdx = 0;
  let flipped = false;

  // Elements
  const deckEl = $('#flashcard-deck');
  const typeEl = $('#flashcard-type');
  const defTagsEl = $('#flashcard-tags');
  const frontEl = $('#flashcard-front');
  const backWrapEl = $('#flashcard-back-wrap');
  const backEl = $('#flashcard-back');
  const tagsOnceEl = $('#flashcard-tags-once');
  const addBtn = $('#flashcard-add');
  const clozeBtn = $('#flashcard-clozeWrap');
  const clearAllBtn = $('#flashcard-clearAll');
  const exportJsonBtn = $('#flashcard-exportJSON');
  const importTxtBtn = $('#flashcard-importTxt');
  const fileEl = $('#flashcard-file');
  const bulkEl = $('#flashcard-bulk');
  const bulkTypeEl = $('#flashcard-bulk-type');
  const bulkAddBtn = $('#flashcard-bulk-add');
  const counterEl = $('#flashcard-counter');

  const listEl = $('#flashcard-list');
  const searchEl = $('#flashcard-search');
  const shuffleBtn = $('#flashcard-shuffle');
  const exportTSVBtn = $('#flashcard-export-tsv');
  const exportCSVBtn = $('#flashcard-export-csv');

  const reviewWrap = $('#flashcard-review');
  const startReviewBtn = $('#flashcard-start-review');
  const card3d = $('#flashcard-card3d');
  const frontSide = $('#flashcard-front-side');
  const backSide = $('#flashcard-back-side');
  const bar = $('#flashcard-bar');
  const flipBtn = $('#flashcard-flip');
  const hardBtn = $('#flashcard-hard');
  const goodBtn = $('#flashcard-good');
  const easyBtn = $('#flashcard-easy');

  const toast = $('#flashcard-toast');

  // UI helpers
  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), 1600);
  }
  function uid(){ return Math.random().toString(36).slice(2,9) }

  // Toggle back field for cloze
  function syncNoteTypeUI(){
    const isCloze = typeEl.value === 'cloze';
    backWrapEl.style.display = isCloze ? 'none' : 'grid';
  }
  typeEl.addEventListener('change', syncNoteTypeUI);
  syncNoteTypeUI();

  // Autosave
  function saveLocal(){
    const data = {deck: deckEl.value, type: typeEl.value, defTags: defTagsEl.value, cards: flashcards};
    localStorage.setItem('snip_flashcards', JSON.stringify(data));
  }
  function loadLocal(){
    try{
      const raw = localStorage.getItem('snip_flashcards');
      if(!raw) return;
      const data = JSON.parse(raw);
      deckEl.value = data.deck || deckEl.value;
      typeEl.value = data.type || typeEl.value;
      defTagsEl.value = data.defTags || '';
      flashcards = Array.isArray(data.cards)? data.cards : [];
      syncNoteTypeUI();
      renderList();
    }catch(e){}
  }
  loadLocal();

  // Add card
  function addCard({front, back='', tags=[], type}){
    if(!front.trim()){ showToast('Front is empty'); return }
    const id = uid();
    const now = Date.now();
    flashcards.push({
      id, front: front.trim(), back: back.trim(),
      tags, type: type || typeEl.value,
      due: now, lapses:0, ease:250 // basic ease %
    });
    renderList();
    frontEl.value = ''; backEl.value = ''; tagsOnceEl.value='';
    showToast('Card added');
    saveLocal();
  }

  addBtn.addEventListener('click', () => {
    const baseTags = (defTagsEl.value || '').split(',').map(t=>t.trim()).filter(Boolean);
    const onceTags = (tagsOnceEl.value || '').split(',').map(t=>t.trim()).filter(Boolean);
    const tags = Array.from(new Set([...baseTags, ...onceTags]));
    addCard({front: frontEl.value, back: backEl.value, tags});
  });

  // Cloze wrapper
  clozeBtn.addEventListener('click', () => {
    const ta = frontEl;
    const {selectionStart:s, selectionEnd:e} = ta;
    if(s===e){ showToast('Select text to cloze'); return }
    const before = ta.value.slice(0,s);
    const mid = ta.value.slice(s,e);
    const after = ta.value.slice(e);
    const count = (ta.value.match(/\{\{c(\d+)::/g)||[]).length + 1;
    ta.value = `${before}{{c${count}::${mid}}}${after}`;
    ta.focus(); ta.setSelectionRange(s, s + `{{c${count}::`.length + mid.length + 2);
  });

  // Import JSON
  fileEl.addEventListener('change', async (e)=>{
    const file = e.target.files?.[0]; if(!file) return;
    const txt = await file.text();
    try{
      const data = JSON.parse(txt);
      if(Array.isArray(data.cards)){
        flashcards = data.cards; renderList(); saveLocal(); showToast('JSON imported');
      }else{ showToast('Invalid JSON format') }
    }catch{ showToast('Could not parse JSON') }
    fileEl.value = '';
  });

  // Import text
  importTxtBtn.addEventListener('click', () => {
    bulkEl.scrollIntoView({behavior:'smooth', block:'center'});
    bulkEl.focus();
  });

  // Bulk add
  function parseBulk(type, text){
    const out = [];
    if(type==='qa'){
      const blocks = text.split(/\n\s*\n/).map(b=>b.trim()).filter(Boolean);
      for(const b of blocks){
        const q = b.match(/^Q:\s*(.*)$/mi);
        const a = b.match(/^A:\s*(.*)$/mi);
        if(q){ out.push({front:q[1].trim(), back:a? a[1].trim() : '', tags:[]}) }
      }
    }else if(type==='csv' || type==='tsv'){
      const sep = type==='csv' ? ',' : '\t';
      const lines = text.split(/\n/);
      for(const line of lines){
        const parts = line.split(sep);
        if(!parts[0]) continue;
        const front = (parts[0]||'').trim();
        const back = (parts[1]||'').trim();
        const tags = (parts[2]||'').split(',').map(t=>t.trim()).filter(Boolean);
        out.push({front, back, tags});
      }
    }
    return out;
  }
  bulkAddBtn.addEventListener('click', ()=>{
    const items = parseBulk(bulkTypeEl.value, bulkEl.value);
    if(!items.length){ showToast('Nothing parsed'); return }
    const baseTags = (defTagsEl.value || '').split(',').map(t=>t.trim()).filter(Boolean);
    for(const it of items){
      const tags = Array.from(new Set([...(it.tags||[]), ...baseTags]));
      addCard({front:it.front, back:it.back, tags, type:typeEl.value});
    }
    bulkEl.value = '';
  });

  // Clear deck
  clearAllBtn.addEventListener('click', ()=>{
    if(!confirm('Clear all cards?')) return;
    flashcards = []; renderList(); saveLocal(); showToast('Deck cleared');
  });

  // Export JSON
  exportJsonBtn.addEventListener('click', ()=>{
    download('flashcards.json', JSON.stringify({deck:deckEl.value, cards:flashcards}, null, 2));
  });

  // Export TSV for Anki (Front, Back, Tags)
  exportTSVBtn.addEventListener('click', ()=>{
    const rows = flashcards.map(c=>{
      const t = (c.tags||[]).join(',');
      // For reverse type, we output two rows (front/back and back/front) like Anki "Basic & Reverse"
      if(c.type==='reverse'){
        return [
          [c.front, c.back, t].join('\t'),
          [c.back, c.front, t].join('\t')
        ].join('\n');
      }
      if(c.type==='cloze'){
        // Cloze usually uses single field; we put cloze on front, back optional
        return [c.front, c.back||'', t].join('\t');
      }
      return [c.front, c.back, t].join('\t');
    }).join('\n');
    download(safeFile(`${deckEl.value || 'deck'}-anki.tsv`), rows);
    showToast('Exported TSV for Anki import');
  });

  // Export CSV
  exportCSVBtn.addEventListener('click', ()=>{
    const esc = v => `"${String(v??'').replace(/"/g,'""')}"`;
    const rows = [
      ['Front','Back','Tags'].join(',')
    ].concat(flashcards.flatMap(c=>{
      const t = (c.tags||[]).join(',');
      if(c.type==='reverse'){
        return [
          [esc(c.front), esc(c.back), esc(t)].join(','),
          [esc(c.back), esc(c.front), esc(t)].join(',')
        ];
      }
      return [[esc(c.front), esc(c.back), esc(t)].join(',')];
    }));
    download(safeFile(`${deckEl.value || 'deck'}.csv`), rows.join('\n'));
    showToast('Exported CSV');
  });

  function safeFile(name){
    return name.replace(/[^\w\-\.]+/g,'_').toLowerCase();
  }
  function download(filename, content){
    const a = document.createElement('a');
    a.href = URL.createObjectURL(new Blob([content], {type:'text/plain;charset=utf-8'}));
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    URL.revokeObjectURL(a.href);
    a.remove();
  }

  // Render list
  function renderList(){
    filtered = applySearch(flashcards, searchEl.value);
    listEl.innerHTML = '';
    for(const c of filtered){
      const el = document.createElement('div');
      el.className = 'flashcard-item';
      el.innerHTML = `
        <div class="flashcard-item-head">
          <div>
            <strong>${escapeHTML(trimForList(c.front))}</strong>
            ${c.type==='reverse' ? '<span class="flashcard-chip">↔︎ Reverse</span>' : c.type==='cloze' ? '<span class="flashcard-chip">Cloze</span>' : ''}
          </div>
          <div class="flashcard-row">
            ${ (c.tags||[]).map(t=>`<span class="flashcard-tag flashcard-chip">${escapeHTML(t)}</span>`).join('') }
            <button class="flashcard-btn flashcard-btn-ghost" data-act="edit" data-id="${c.id}">Edit</button>
            <button class="flashcard-btn flashcard-btn-ghost" data-act="del" data-id="${c.id}">Delete</button>
          </div>
        </div>
        <div class="flashcard-muted">${escapeHTML(trimForList(c.back || ''))}</div>
      `;
      listEl.appendChild(el);
    }
    counterEl.textContent = `${flashcards.length} card${flashcards.length===1?'':'s'}`;
    saveLocal();
  }
  function trimForList(s){ s = s || ''; return s.length>140 ? s.slice(0,140)+'…' : s }
  function escapeHTML(s){ return s.replace(/[&<>"']/g,m=>({ '&':'&nbsp;&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])) }

  // List actions
  listEl.addEventListener('click', (e)=>{
    const btn = e.target.closest('button[data-act]');
    if(!btn) return;
    const id = btn.getAttribute('data-id');
    const idx = flashcards.findIndex(c=>c.id===id);
    if(idx<0) return;
    const act = btn.getAttribute('data-act');
    if(act==='del'){
      flashcards.splice(idx,1); renderList(); showToast('Deleted'); return;
    }
    if(act==='edit'){
      const c = flashcards[idx];
      typeEl.value = c.type || 'basic';
      syncNoteTypeUI();
      frontEl.value = c.front;
      backEl.value = c.back || '';
      tagsOnceEl.value = (c.tags||[]).join(',');
      flashcards.splice(idx,1);
      renderList();
      showToast('Loaded into editor');
    }
  });

  // Search & shuffle
  function applySearch(arr, q){
    q = (q||'').toLowerCase().trim();
    if(!q) return arr.slice();
    return arr.filter(c =>
      c.front.toLowerCase().includes(q) ||
      (c.back||'').toLowerCase().includes(q) ||
      (c.tags||[]).some(t=>t.toLowerCase().includes(q))
    );
  }
  searchEl.addEventListener('input', renderList);
  shuffleBtn.addEventListener('click', ()=>{
    flashcards.sort(()=>Math.random()-.5); renderList(); showToast('Shuffled');
  });

  // Review Mode
  function startReview(){
    if(!filtered.length){ showToast('No cards to review'); return }
    reviewQueue = filtered.slice();
    curIdx = 0; flipped=false;
    reviewWrap.hidden = false;
    renderReview();
    card3d.focus();
  }
  startReviewBtn.addEventListener('click', startReview);

  function renderReview(){
    const c = reviewQueue[curIdx];
    if(!c){ showToast('Session complete'); reviewWrap.hidden=true; return }
    card3d.classList.remove('is-flipped');
    flipped = false;
    frontSide.innerHTML = sanitizeRender(c.front);
    backSide.innerHTML = sanitizeRender(c.back || '(Answer on flip)');
    bar.style.width = ((curIdx)/reviewQueue.length*100).toFixed(1)+'%';
  }
  function flipCard(){
    flipped = !flipped;
    card3d.classList.toggle('is-flipped', flipped);
  }
  function gradeCard(grade){
    // Lightweight scheduler: adjust ease & move along
    const c = reviewQueue[curIdx];
    if(!c) return;
    if(grade==='hard'){ c.ease = Math.max(130, (c.ease||250) - 20); c.lapses=(c.lapses||0)+1 }
    if(grade==='good'){ c.ease = Math.min(300, (c.ease||250) + 0) }
    if(grade==='easy'){ c.ease = Math.min(330, (c.ease||250) + 10) }
    curIdx++;
    if(curIdx>=reviewQueue.length){
      bar.style.width='100%';
      setTimeout(()=>{ showToast('Great work! Session finished.'); reviewWrap.hidden=true; }, 300);
    }else{
      renderReview();
    }
    saveLocal();
  }

  flipBtn.addEventListener('click', flipCard);
  hardBtn.addEventListener('click', ()=>gradeCard('hard'));
  goodBtn.addEventListener('click', ()=>gradeCard('good'));
  easyBtn.addEventListener('click', ()=>gradeCard('easy'));

  // Keyboard shortcuts
  document.addEventListener('keydown', (e)=>{
    if(reviewWrap.hidden) return;
    if(e.code==='Space'){ e.preventDefault(); flipCard() }
    if(e.key==='1') gradeCard('hard');
    if(e.key==='2') gradeCard('good');
    if(e.key==='3') gradeCard('easy');
  });

  // Helpers for rendering (keep simple, allow <b><i><code>)
  function sanitizeRender(s){
    // Basic link & code highlight. Escapes HTML then restores allowed tags if present.
    s = (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    s = s.replace(/\*\*(.+?)\*\*/g,'<b>$1</b>')
         .replace(/\*(.+?)\*/g,'<i>$1</i>')
         .replace(/`(.+?)`/g,'<code>$1</code>')
         .replace(/\n/g,'<br/>');
    return s;
  }

  // Initial render
  renderList();
})();
</script>

</body>
</html>
